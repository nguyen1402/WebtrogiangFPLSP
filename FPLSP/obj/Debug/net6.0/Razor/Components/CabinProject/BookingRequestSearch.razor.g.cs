#pragma checksum "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "2b3b52afa687efaf0e91d7bb45c1a904cfe916ba"
// <auto-generated/>
#pragma warning disable 1591
namespace FPLSP.Components.CabinProject
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using FPLSP;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using FPLSP.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using MudBlazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using FPLSP.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Blazored.Typeahead;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using CurrieTechnologies.Razor.SweetAlert2;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
using FPLSP.Repositories.Interfaces.CabinProject;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
using FPLSP.Server.Domain.Entities.CoresParts;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
using FPLSP.Server.Infrastructure.ViewModels.CabinProject.BookingRequest;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
using FPLSP.Server.Infrastructure.ViewModels.CabinProject.ShiftOfCabin;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
using FPLSP.Server.Infrastructure.ViewModels.CabinProject.TeachingSchedule;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
using Microsoft.AspNetCore.SignalR.Client;

#line default
#line hidden
#nullable disable
    public partial class BookingRequestSearch : global::Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.EditForm>(0);
            __builder.AddAttribute(1, "Model", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Object>(
#nullable restore
#line 8 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
                 _bookingRequestSearch

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(2, "OnSubmit", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::Microsoft.AspNetCore.Components.Forms.EditContext>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Forms.EditContext>(this, 
#nullable restore
#line 8 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
                                                  SearchForm

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(3, "class", "row");
            __builder.AddAttribute(4, "ChildContent", (global::Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                __builder2.OpenElement(5, "div");
                __builder2.AddAttribute(6, "class", "col-lg-8");
                __builder2.AddAttribute(7, "style", "margin: 5px -20px 0 20px;");
                __builder2.AddAttribute(8, "b-8svg5j43wf");
                __builder2.OpenElement(9, "div");
                __builder2.AddAttribute(10, "class", "input-group");
                __builder2.AddAttribute(11, "b-8svg5j43wf");
                __builder2.OpenElement(12, "input");
                __builder2.AddAttribute(13, "placeholder", "üîç T√¨m ki·∫øm theo m√£ gi·∫£ng vi√™n...");
                __builder2.AddAttribute(14, "class", "form-control");
                __builder2.AddAttribute(15, "onkeyup", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.KeyboardEventArgs>(this, 
#nullable restore
#line 11 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
                                                                                                                                                    ()=>SearchForm(null)

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(16, "aria-label", "Sizing example input");
                __builder2.AddAttribute(17, "aria-describedby", "inputGroup-sizing-sm");
                __builder2.AddAttribute(18, "value", global::Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 11 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
                                                                                                      _bookingRequestSearch.stringSearch

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(19, "oninput", global::Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => _bookingRequestSearch.stringSearch = __value, _bookingRequestSearch.stringSearch));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.AddAttribute(20, "b-8svg5j43wf");
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(21, "\r\n\r\n    ");
                __builder2.OpenElement(22, "div");
                __builder2.AddAttribute(23, "class", "col-lg-4 threedot row my-2");
                __builder2.AddAttribute(24, "style", "height:30px; margin:0;");
                __builder2.AddAttribute(25, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 15 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
                                                                                      Open

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(26, "type", "button");
                __builder2.AddAttribute(27, "title", "Tr·∫°ng th√°i");
                __builder2.AddAttribute(28, "b-8svg5j43wf");
                __builder2.AddMarkupContent(29, "<div class=\"col-lg-1\" b-8svg5j43wf></div>\r\n        ");
                __builder2.OpenElement(30, "span");
                __builder2.AddAttribute(31, "class", "col-lg-9" + " " + (
#nullable restore
#line 17 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
                               _backgroundcolorstatus

#line default
#line hidden
#nullable disable
                ) + " position-relative");
                __builder2.AddAttribute(32, "style", "font-size: initial;right: 7px;");
                __builder2.AddAttribute(33, "b-8svg5j43wf");
#nullable restore
#line (18,14)-(18,26) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
__builder2.AddContent(34, _statuslable);

#line default
#line hidden
#nullable disable
                __builder2.AddMarkupContent(35, "\r\n            ");
                __builder2.OpenElement(36, "span");
                __builder2.AddAttribute(37, "class", "position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger");
                __builder2.AddAttribute(38, "b-8svg5j43wf");
#nullable restore
#line (20,18)-(20,31) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
__builder2.AddContent(39, _amountstatus);

#line default
#line hidden
#nullable disable
                __builder2.AddMarkupContent(40, "\r\n                ");
                __builder2.AddMarkupContent(41, "<span class=\"visually-hidden\" b-8svg5j43wf>unread messages</span>");
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(42, "\r\n    ");
                __builder2.OpenElement(43, "span");
                __builder2.AddAttribute(44, "style", "display:" + (
#nullable restore
#line 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
                          _displayOfType

#line default
#line hidden
#nullable disable
                ) + ";");
                __builder2.AddAttribute(45, "b-8svg5j43wf");
                __builder2.OpenElement(46, "div");
                __builder2.AddAttribute(47, "class", "selectstatus");
                __builder2.AddAttribute(48, "b-8svg5j43wf");
#nullable restore
#line 29 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
             if (_listBookingRequest != null)
            {

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(49, "div");
                __builder2.AddAttribute(50, "style", "padding: 3px 10px;");
                __builder2.AddAttribute(51, "type", "button");
                __builder2.AddAttribute(52, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 31 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
                                                                         SelectAll

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(53, "b-8svg5j43wf");
                __builder2.AddMarkupContent(54, "T·∫•t c·∫£ ");
                __builder2.OpenElement(55, "span");
                __builder2.AddAttribute(56, "class", "badge bg-primary");
                __builder2.AddAttribute(57, "style", "float:right;");
                __builder2.AddAttribute(58, "b-8svg5j43wf");
#nullable restore
#line (31,145)-(31,213) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
__builder2.AddContent(59, _listbookingRequestsGrouped.Where(c => c.Status != 1).ToList().Count);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(60, "\r\n                ");
                __builder2.OpenElement(61, "div");
                __builder2.AddAttribute(62, "style", "padding: 3px 10px;");
                __builder2.AddAttribute(63, "type", "button");
                __builder2.AddAttribute(64, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 32 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
                                                                         noCheckedMethod

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(65, "b-8svg5j43wf");
                __builder2.AddMarkupContent(66, "Ch∆∞a x·ª≠ l√Ω");
                __builder2.OpenElement(67, "span");
                __builder2.AddAttribute(68, "class", "badge bg-danger");
                __builder2.AddAttribute(69, "style", "float:right;");
                __builder2.AddAttribute(70, "b-8svg5j43wf");
#nullable restore
#line (32,153)-(32,249) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
__builder2.AddContent(71, _listbookingRequestsGrouped.Where(c => c.Status == 0 && c.EndTime > DateTime.Now).ToList().Count);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(72, "\r\n                ");
                __builder2.OpenElement(73, "div");
                __builder2.AddAttribute(74, "style", "padding: 3px 10px;");
                __builder2.AddAttribute(75, "type", "button");
                __builder2.AddAttribute(76, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 33 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
                                                                         CheckedMethod

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(77, "b-8svg5j43wf");
                __builder2.AddMarkupContent(78, "ƒê√£ ƒë∆∞·ª£c ch·ªçn");
                __builder2.OpenElement(79, "span");
                __builder2.AddAttribute(80, "class", "badge bg-success");
                __builder2.AddAttribute(81, "style", "float:right;");
                __builder2.AddAttribute(82, "b-8svg5j43wf");
#nullable restore
#line (33,154)-(33,250) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
__builder2.AddContent(83, _listbookingRequestsGrouped.Where(c => c.Status == 2 && c.EndTime > DateTime.Now).ToList().Count);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(84, "\r\n                ");
                __builder2.OpenElement(85, "div");
                __builder2.AddAttribute(86, "style", "padding: 3px 10px;");
                __builder2.AddAttribute(87, "type", "button");
                __builder2.AddAttribute(88, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 34 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
                                                                         CloseCheckedMethod

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(89, "b-8svg5j43wf");
                __builder2.AddMarkupContent(90, "ƒê√£ b·ªã h·ªßy");
                __builder2.OpenElement(91, "span");
                __builder2.AddAttribute(92, "class", "badge bg-warning");
                __builder2.AddAttribute(93, "style", "float:right;");
                __builder2.AddAttribute(94, "b-8svg5j43wf");
#nullable restore
#line (34,156)-(34,252) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
__builder2.AddContent(95, _listbookingRequestsGrouped.Where(c => c.Status == 3 && c.EndTime > DateTime.Now).ToList().Count);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(96, "\r\n                ");
                __builder2.OpenElement(97, "div");
                __builder2.AddAttribute(98, "style", "padding: 3px 10px;");
                __builder2.AddAttribute(99, "type", "button");
                __builder2.AddAttribute(100, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 35 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
                                                                         ExpiredCheckedMethod

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(101, "b-8svg5j43wf");
                __builder2.AddMarkupContent(102, "ƒê√£ h·∫øt h·∫°n");
                __builder2.OpenElement(103, "span");
                __builder2.AddAttribute(104, "class", "badge bg-secondary");
                __builder2.AddAttribute(105, "style", "float:right;");
                __builder2.AddAttribute(106, "b-8svg5j43wf");
#nullable restore
#line (35,162)-(35,259) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
__builder2.AddContent(107, _listbookingRequestsGrouped.Where(c => c.Status != 1 && c.EndTime <= DateTime.Now).ToList().Count);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.CloseElement();
#nullable restore
#line 36 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
            }

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.CloseElement();
            }
            ));
            __builder.CloseComponent();
        }
        #pragma warning restore 1998
#nullable restore
#line 40 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Components\CabinProject\BookingRequestSearch.razor"
       
    [Parameter]
    public EventCallback<BookingRequestSearchViewModel> OnSearch { get; set; }
    [Parameter]
    public string _idTrainingFacility { get; set; }

    private BookingRequestSearchViewModel _bookingRequestSearch = new BookingRequestSearchViewModel();
    private List<BookingRequestViewModel> _listBookingRequest = new();
    private List<TeachingScheduleVM> _teachingScheduleVMs = new List<TeachingScheduleVM>();
    private List<BookingRequestViewModel> _listbookingRequestsGrouped = new();
    private List<ShiftOfCabinVM> _shiftOfCabinVMs;

    [Inject] private IBookingRequestRepo _iBookingRequestRepo { get; set; }
    [Inject] private ITeachingScheduleApiClient _teachingScheduleApiClient { get; set; }
    [Inject] private IShiftOfCabinApiClient _ishiftOfCabinApiClient { get; set; }

    private bool _checked = false;
    private bool _nochecked = false;
    private bool _closechecked = false;
    private bool _expiredchecked = false;
    public string _displayOfType { get; set; } = "none";

    private string _statuslable = "T·∫•t c·∫£";
    private int _amountstatus { get; set; } = 0;
    private string _backgroundcolorstatus { get; set; } = "badge bg-primary";

    private int _dbchecked = 0;
    private int _dbnochecked = 0;
    private int _dbclosechecked = 0;
    private int _dbexpiredchecked = 0;

    private DateTime _monday = new();
    private DateTime _sunday = new();

    private async Task SearchForm(EditContext context)
    {
        await OnSearch.InvokeAsync(_bookingRequestSearch);
    }
    protected override async Task OnInitializedAsync()
    {
        try
        {
            string url = "http://localhost:5001/SignalRCabinHub";
            HubConnection _connection = null;
            bool isConnected = false;
            string connectionStatus = "Closed";
            _connection = new HubConnectionBuilder()
                .WithUrl(url)
                .Build();

            await _connection.StartAsync();
            isConnected = true;
            connectionStatus = "Connected :-)";

            _connection.Closed += async (s) =>
            {
                isConnected = false;
                connectionStatus = "Disconnected";
                await _connection.StartAsync();
                isConnected = true;
            };

            _connection.On<string>("SignalRBookingRequests", async (res) =>
            {
                if (res == "Done")
                {
                    await GetTasks();

                    await this.InvokeAsync(() => this.StateHasChanged());
                }


            });
        }
        catch (Exception ex)
        {


        }
        finally
        {
            await GetTasks();
        }       
    }
    public async Task GetTasks()
    {
        await LoadDaysOfWeek(DateTime.Now);
        _listBookingRequest = await _iBookingRequestRepo.GetAllBookingRequestAsync();
        _shiftOfCabinVMs = await _ishiftOfCabinApiClient.GetAll();
        _listBookingRequest = _listBookingRequest.Where(c => (new DateTime(c.StartTime.Year, c.StartTime.Month, c.StartTime.Day)) >= _monday && (new DateTime(c.StartTime.Year, c.StartTime.Month, c.StartTime.Day)) <= _sunday && c.Status != 4 && c.Status != 5).ToList();
        var teachingschedules = await _teachingScheduleApiClient.GetAll();
        _teachingScheduleVMs = teachingschedules.Where(c => c.IdTrainingFacility == Guid.Parse(_idTrainingFacility) && c.Status != 1).ToList();
        _listbookingRequestsGrouped.Clear();
        if (_listBookingRequest != null)
        {
            foreach (var bookigroup in _listBookingRequest.Where(c => c.Status != 1 && (_teachingScheduleVMs.Any(x => x.SubjectId == c.SubjectId && x.ClassId == c.ClassId && x.IdLecturter == c.IdLectuter && x.TeachingDay.Add(_shiftOfCabinVMs.FirstOrDefault(s => s.Id == x.IdShift).StartTime) == c.StartTime && x.TeachingDay.Add(_shiftOfCabinVMs.FirstOrDefault(s => s.Id == x.IdShift).EndTime) == c.EndTime))).GroupBy(g => new { g.SubjectId, g.ClassId, g.IdLectuter, g.StartTime, g.EndTime }).ToList())
            {
                _listbookingRequestsGrouped.Add(bookigroup.OrderByDescending(c => c.FeedBackTime).FirstOrDefault());
            }
        }
        if (_statuslable == "T·∫•t c·∫£")
        {
            _amountstatus = _listbookingRequestsGrouped.Where(c => c.Status != 1).ToList().Count;
        }
        else if (_statuslable == "ƒê√£ ƒë∆∞·ª£c ch·ªçn")
        {
            _amountstatus = _listbookingRequestsGrouped.Where(c => c.Status == 2 && c.EndTime > DateTime.Now).ToList().Count;
        }
        else if (_statuslable == "Ch∆∞a x·ª≠ l√Ω")
        {
            _amountstatus = _listbookingRequestsGrouped.Where(c => c.Status == 0 && c.EndTime > DateTime.Now).ToList().Count;
        }
        else if (_statuslable == "ƒê√£ b·ªã h·ªßy")
        {
            _amountstatus = _listbookingRequestsGrouped.Where(c => c.Status == 3 && c.EndTime > DateTime.Now).ToList().Count;
        }

    }


    public async Task LoadDaysOfWeek(DateTime date)
    {
        date = new DateTime(date.Year, date.Month, date.Day);

        var dayOfWeek = date.DayOfWeek;
        if (dayOfWeek == DayOfWeek.Sunday)
        {
            //x√©t ch·ªß nh·∫≠t l√† ƒë·∫ßu tu·∫ßn
            //return date.AddDays(1);

            //x√©t ch·ªß nh·∫≠t l√† ng√†y cu·ªëi tu·∫ßn
            _monday = date.AddDays(-6);
        }
        else
        {
            int offset = dayOfWeek - DayOfWeek.Monday;
            _monday = date.AddDays(-offset);
        }
        _sunday = _monday.AddDays(6);
    }

    private void Open()
    {
        if (_displayOfType != "none")
        {
            _displayOfType = "none";
        }
        else
        {
            _displayOfType = "block";
        }
    }
    private async Task SelectAll()
    {
        _amountstatus = _listbookingRequestsGrouped.Where(c => c.Status != 1).ToList().Count;
        _statuslable = "T·∫•t c·∫£";
        _backgroundcolorstatus = "badge bg-primary";
        _bookingRequestSearch.Status = null;
        _displayOfType = "none";
        await SearchForm(null);
    }
    private async Task CheckedMethod()
    {
        _amountstatus = _listbookingRequestsGrouped.Where(c => c.Status == 2 && c.EndTime > DateTime.Now).ToList().Count;
        _backgroundcolorstatus = "badge bg-success";
        _statuslable = "ƒê√£ ƒë∆∞·ª£c ch·ªçn";
        _bookingRequestSearch.Status = 2;
        _displayOfType = "none";
        await SearchForm(null);
    }
    private async Task noCheckedMethod()
    {
        _amountstatus = _listbookingRequestsGrouped.Where(c => c.Status == 0 && c.EndTime > DateTime.Now).ToList().Count;
        _backgroundcolorstatus = "badge bg-danger";
        _statuslable = "Ch∆∞a x·ª≠ l√Ω";
        _bookingRequestSearch.Status = 0;
        _displayOfType = "none";
        await SearchForm(null);
    }
    private async Task CloseCheckedMethod()
    {
        _amountstatus = _listbookingRequestsGrouped.Where(c => c.Status == 3 && c.EndTime > DateTime.Now).ToList().Count;
        _backgroundcolorstatus = "badge bg-warning";
        _statuslable = "ƒê√£ b·ªã h·ªßy";
        _bookingRequestSearch.Status = 3;
        _displayOfType = "none";
        await SearchForm(null);
    }
    private async Task ExpiredCheckedMethod()
    {
        _amountstatus = _listbookingRequestsGrouped.Where(c => c.Status != 1 && c.EndTime <= DateTime.Now).ToList().Count;
        _backgroundcolorstatus = "badge bg-secondary";
        _statuslable = "ƒê√£ h·∫øt h·∫°n";
        _bookingRequestSearch.Status = 4;
        _displayOfType = "none";
        await SearchForm(null);
    }


#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
