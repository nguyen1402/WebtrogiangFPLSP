#pragma checksum "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "3a955601763c4eddb450d5bdb49513b70a799053"
// <auto-generated/>
#pragma warning disable 1591
namespace FPLSP.Pages.FPLExam
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using FPLSP;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using FPLSP.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using MudBlazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using FPLSP.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Blazored.Typeahead;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using CurrieTechnologies.Razor.SweetAlert2;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
using BlazorInputFile;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
using FPLSP.Data.Securities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
using FPLSP.Repositories.Interfaces;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
using FPLSP.Repositories.Interfaces.FPLExam;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
using FPLSP.Server.Domain.Dtos;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
using System.ComponentModel.DataAnnotations;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
using FPLSP.Server.Domain.Entities.CoresParts;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
using FPLSP.Server.Domain.Entities.FPLExam;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
using FPLSP.Server.Domain.Entities.UsesParts;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
using FPLSP.Server.Infrastructure.ViewModels.FPLExam;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
using Microsoft.AspNetCore.SignalR.Client;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Components.RouteAttribute("/detaiexamstorageofsubject/{IdSubjectNonDecrpyt}/{IdUserNonDecrpyt}/{IdLectureNonDecrpyt}")]
    public partial class DetailExamStorageOfSubject : global::Microsoft.AspNetCore.Components.ComponentBase, IDisposable
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "row m-2");
            __builder.OpenElement(2, "div");
            __builder.AddAttribute(3, "class", "col-6");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "row");
            __builder.OpenElement(6, "div");
            __builder.AddAttribute(7, "class", "col-6");
            __builder.OpenElement(8, "a");
            __builder.AddAttribute(9, "class", "btn btn-danger mb-3");
            __builder.AddAttribute(10, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 23 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                                         RedirectToBack

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(11, "Quay Lại");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(12, "\r\n    <div class=\"col-6\"></div>");
            __builder.CloseElement();
            __builder.AddMarkupContent(13, "\r\n");
            __builder.OpenElement(14, "div");
            __builder.AddAttribute(15, "class", "row");
            __builder.OpenElement(16, "div");
            __builder.AddAttribute(17, "class", "col-lg-5");
            __builder.OpenElement(18, "section");
            __builder.AddAttribute(19, "class");
            __builder.OpenElement(20, "article");
            __builder.AddAttribute(21, "class", "postcard light blue");
            __builder.OpenElement(22, "div");
            __builder.AddAttribute(23, "class", "postcard__text t-dark");
            __builder.AddAttribute(24, "style", "object-fit:cover;height:550px;");
            __builder.OpenElement(25, "h3");
            __builder.AddAttribute(26, "class", "postcard__title");
            __builder.AddMarkupContent(27, "Môn Học : ");
#nullable restore
#line (36,60)-(36,82) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
__builder.AddContent(28, _subjectUp.SubjectName);

#line default
#line hidden
#nullable disable
            __builder.AddContent(29, " - ");
#nullable restore
#line (36,86)-(36,108) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
__builder.AddContent(30, _subjectUp.SubjectCode);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(31, "\r\n                    ");
            __builder.OpenElement(32, "div");
            __builder.AddAttribute(33, "class", "postcard__subtitle small");
            __builder.OpenElement(34, "time");
            __builder.AddAttribute(35, "datetime", 
#nullable restore
#line 38 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                         _subjectUp.CreatedDay

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(36, "<i class=\"fas fa-calendar-alt mr-2\"></i> Ngày Tạo : ");
#nullable restore
#line (39,82)-(39,128) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
__builder.AddContent(37, _subjectUp.CreatedDay.ToString("dddd-MM-yyyy"));

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(38, "\r\n                    <div class=\"postcard__bar\"></div>\r\n                    ");
            __builder.OpenElement(39, "div");
            __builder.AddAttribute(40, "class", "postcard__preview-txt");
            __builder.OpenElement(41, "div");
            __builder.AddAttribute(42, "class", "postcard__preview-txt");
            __builder.OpenElement(43, "div");
            __builder.AddMarkupContent(44, "\r\n                                Danh sách giảng viên\r\n");
#nullable restore
#line 47 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                  
                                    int i = 0;
                                

#line default
#line hidden
#nullable disable
#nullable restore
#line 50 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                 foreach (var x in listTeachersInSubject)
                                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(45, "div");
            __builder.AddAttribute(46, "class", "row");
            __builder.OpenElement(47, "div");
            __builder.AddAttribute(48, "class", "col-12");
            __builder.OpenElement(49, "h6");
            __builder.AddAttribute(50, "class", "mud-typography mud-typography-subtitle1");
#nullable restore
#line (55,50)-(55,64) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
__builder.AddContent(51, lsgiangvien[i]);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 59 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                    i++;
                                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(52, "\r\n                            <div></div>");
            __builder.CloseElement();
            __builder.AddMarkupContent(53, "\r\n                        <div></div>");
            __builder.CloseElement();
            __builder.AddMarkupContent(54, "\r\n                    <ul class=\"postcard__tagbox\"></ul>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(55, "\r\n            <br>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(56, "\r\n    ");
            __builder.OpenElement(57, "div");
            __builder.AddAttribute(58, "class", "col-lg-7");
            __builder.OpenElement(59, "section");
            __builder.AddAttribute(60, "class");
            __builder.OpenElement(61, "article");
            __builder.AddAttribute(62, "class", "postcard light blue");
            __builder.OpenElement(63, "div");
            __builder.AddAttribute(64, "class", "postcard__text t-dark");
            __builder.OpenElement(65, "h3");
            __builder.AddAttribute(66, "class", "postcard__title");
            __builder.AddMarkupContent(67, "Danh Sách Đề Thi Môn : ");
#nullable restore
#line (85,73)-(85,95) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
__builder.AddContent(68, _subjectUp.SubjectName);

#line default
#line hidden
#nullable disable
            __builder.AddContent(69, " - ");
#nullable restore
#line (85,99)-(85,121) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
__builder.AddContent(70, _subjectUp.SubjectCode);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(71, "\r\n                    <div class=\"postcard__subtitle small\"></div>\r\n                    <div class=\"postcard__bar\"></div>\r\n                    ");
            __builder.OpenElement(72, "div");
            __builder.AddAttribute(73, "class", "postcard__preview-txt");
            __builder.OpenElement(74, "div");
            __builder.AddAttribute(75, "class", "row");
#nullable restore
#line 92 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                             if ((fileTypeError || fileSizeError || fileNameError))
                            {

                                

#line default
#line hidden
#nullable disable
#nullable restore
#line 95 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                 if (fileTypeError)
                                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(76, "div");
            __builder.AddAttribute(77, "class", "alert alert-info");
            __builder.AddAttribute(78, "role", "alert");
            __builder.AddMarkupContent(79, "\r\n                                        Chỉ Chấp Nhận File PDF  | ");
#nullable restore
#line (98,68)-(98,81) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
__builder.AddContent(80, ErrorFileName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 100 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 101 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                 if (fileSizeError)
                                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(81, "div");
            __builder.AddAttribute(82, "class", "alert alert-danger");
            __builder.AddAttribute(83, "role", "alert");
            __builder.AddMarkupContent(84, "\r\n                                        File Tối Đa Có Kích Cỡ Dưới ");
#nullable restore
#line (104,70)-(104,83) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
__builder.AddContent(85, MaxFileSizeMB);

#line default
#line hidden
#nullable disable
            __builder.AddContent(86, " MB. | ");
#nullable restore
#line (104,91)-(104,104) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
__builder.AddContent(87, ErrorFileName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 106 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"

                                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 108 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                 if (fileNameError)
                                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(88, "div");
            __builder.AddAttribute(89, "class", "alert alert-warning");
            __builder.AddAttribute(90, "role", "alert");
            __builder.AddMarkupContent(91, "\r\n                                        Tên File Đã Tồn Tại Hoặc Tên File Đã Vượt quá 50 Kí Tự | ");
#nullable restore
#line (111,99)-(111,112) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
__builder.AddContent(92, ErrorFileName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 113 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"

                                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 114 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                 
                            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(93, "\r\n                        ");
            __builder.OpenElement(94, "div");
            __builder.AddAttribute(95, "clas", "row");
            __builder.AddMarkupContent(96, "<label class=\"text-danger mb-2\">\r\n                                Tải Lên Đề Thi\r\n                            </label>\r\n\r\n                            ");
            __builder.OpenElement(97, "div");
            __builder.AddAttribute(98, "class", "dropzone" + " " + (
#nullable restore
#line 123 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                                  DragClass

#line default
#line hidden
#nullable disable
            ));
            __builder.OpenComponent<global::MudBlazor.MudStack>(99);
            __builder.AddAttribute(100, "Style", "width:100%;height:150px;");
            __builder.AddAttribute(101, "ChildContent", (global::Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.OpenComponent<global::BlazorInputFile.InputFile>(102);
                __builder2.AddAttribute(103, "OnChange", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::BlazorInputFile.IFileListEntry[]>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::BlazorInputFile.IFileListEntry[]>(this, 
#nullable restore
#line 125 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                                                         OnInputFileChanged

#line default
#line hidden
#nullable disable
                )));
                __builder2.AddAttribute(104, "id", "fileInput");
                __builder2.AddAttribute(105, "multiple", true);
                __builder2.AddAttribute(106, "title", "");
                __builder2.AddAttribute(107, "accept", "application/pdf");
                __builder2.AddAttribute(108, "ondragenter", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.DragEventArgs>(this, 
#nullable restore
#line 128 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                                                              HandleDragEnter

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(109, "ondragleave", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.DragEventArgs>(this, 
#nullable restore
#line 129 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                                                              ClearDragClass

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(110, "ondragend", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.DragEventArgs>(this, 
#nullable restore
#line 130 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                                                            HandleDragLeave

#line default
#line hidden
#nullable disable
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(111, "\r\n\r\n                                    ");
                __builder2.AddMarkupContent(112, "<span class=\"text-danger text-center mt-5\">Kéo Thả File Tại Đây Hoặc Chọn</span>");
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(113, "\r\n                        ");
            __builder.OpenElement(114, "div");
            __builder.AddAttribute(115, "class", "row");
            __builder.AddMarkupContent(116, "<label class=\"text-danger mt-3\">\r\n                                Danh Sách File Đã Tải Lên\r\n                            </label>\r\n                            ");
            __builder.OpenComponent<global::MudBlazor.MudPaper>(117);
            __builder.AddAttribute(118, "Elevation", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Int32>(
#nullable restore
#line 143 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                                 0

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(119, "Width", "610px");
            __builder.AddAttribute(120, "MinHeight", "150px");
            __builder.AddAttribute(121, "Class", "pa-4 ma-4 d-flex flex-column mud-background-gray rounded-lg");
            __builder.AddAttribute(122, "ChildContent", (global::Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.OpenComponent<global::MudBlazor.MudChipSet>(123);
                __builder2.AddAttribute(124, "AllClosable", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Boolean>(
#nullable restore
#line 144 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                                         true

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(125, "OnClose", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::MudBlazor.MudChip>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::MudBlazor.MudChip>(this, 
#nullable restore
#line 144 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                                                        RemoveFile

#line default
#line hidden
#nullable disable
                )));
                __builder2.AddAttribute(126, "ChildContent", (global::Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.OpenElement(127, "div");
                    __builder3.AddAttribute(128, "class", "row");
#nullable restore
#line 146 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                         foreach (var file in _lstExamFile.Where(c => c.SubjectId == Guid.Parse(IdSubject)).ToList())
                                        {

#line default
#line hidden
#nullable disable
                    __builder3.OpenElement(129, "div");
                    __builder3.AddAttribute(130, "class", "col-6");
                    __builder3.OpenComponent<global::MudBlazor.MudChip>(131);
                    __builder3.AddAttribute(132, "Color", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::MudBlazor.Color>(
#nullable restore
#line 149 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                                                 Color.Surface

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(133, "Text", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.String>(
#nullable restore
#line 149 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                                                                       file.FileName

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(134, "Class", "text-wrap mb-2");
                    __builder3.CloseComponent();
                    __builder3.CloseElement();
#nullable restore
#line 151 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
                                        }

#line default
#line hidden
#nullable disable
                    __builder3.CloseElement();
                }
                ));
                __builder2.CloseComponent();
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 173 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\FPLExam\DetailExamStorageOfSubject.razor"
       
    [Inject] public ISubjectUPRepo _subjectUPRepo { get; set; }
    [Inject] public IExamFileRepo _examFileRepo { get; set; }
    [Inject] public UserManager<UserSignIn> _userManager { get; set; }
    [Inject] public ISubjectTeacherRepo _iSubjectTeacherRepo { get; set; }
    [Inject] public ILecturersCPRepo _iLecturersCPRepo { get; set; }
    public int Value { get; set; }
    private SubjectDto _subjectUp = new SubjectDto();
    private static string DefaultDragClass = "relative rounded-lg border-2 border-dashed pa-4 mt-4 mud-width-full mud-height-full z-10";
    private string DragClass = DefaultDragClass;
    private List<IFileListEntry> fileNames = new List<IFileListEntry>();
    private string dropClass = "";
    private bool _addSectionOpen;
    //check filesize
    private bool fileSizeError = false;
    private bool fileTypeError = false;
    private bool fileNameError = false;
    const double MaxFileSizeMB = 0.2;
    const double MaxFileSize = MaxFileSizeMB * 1024 * 1024; // 200KB
                                                            //
    private List<ExamStorage> _lstExamFile = new List<ExamStorage>();
    private List<ExamStorage> _lstExamFileForCurrentLec = new List<ExamStorage>();
    private List<ExamStorage> _lstAllExamFileFinal = new List<ExamStorage>();
    private List<ExamStorageViewModel> _lstExamFileForAdding = new List<ExamStorageViewModel>();
    List<string> lsgiangvien = new List<string>();
    [Inject] public NavigationManager navigation { get; set; }
    public List<SubjectTeacherViewModel> listTeachersInSubject = new List<SubjectTeacherViewModel>();


    //private Guid IdUser = Guid.Parse("5f096300-2259-4e3c-bef4-d7fc028a5825");
    //private Guid IdSubject = Guid.Parse("DE763F78-7F1F-496C-B389-03F0C34DB4AE");
    //private Guid IdLecture = Guid.Parse("5a7590e0-9dad-4b2e-ae7b-77a4e0706b37");
    [Parameter]
    public string IdSubjectNonDecrpyt { get; set; }
    public string IdSubject = "";
    [Parameter]
    public string IdUserNonDecrpyt { get; set; }
    public string IdUser = "";


    [Parameter]
    public string IdLectureNonDecrpyt { get; set; }
    public string IdLecture = "";

    private string ErrorFileName = "";
    //

    private bool IsShowWaitting = false;
    //mud carosel
    private bool arrows = true;
    private bool bullets = true;
    private bool enableSwipeGesture = true;
    private bool autocycle = true;
    private Transition transition = Transition.Slide;
    //

    private bool IsLecterturter = false;
    private List<SubjectUP> _lstSubforlec = new List<SubjectUP>();

    [Inject]
    public CryptoServices _cryptoServices { get; set; }
    Uri uri;
    string maxRole = "";

    protected async override Task OnInitializedAsync()
    {
        IdSubject = _cryptoServices.Decrypt(IdSubjectNonDecrpyt.Replace("I0H", "/"));
        IdUser = _cryptoServices.Decrypt(IdUserNonDecrpyt.Replace("I0H", "/"));
        IdLecture = _cryptoServices.Decrypt(IdLectureNonDecrpyt.Replace("I0H", "/"));
        uri = navigation.ToAbsoluteUri(navigation.Uri);
        if (string.IsNullOrEmpty(uri.Query) == false)
        {
            var urifist = uri.Query.Split("?")[1];
            maxRole = _cryptoServices.Decrypt(urifist.Replace("I0H", "/"));
        }

        listTeachersInSubject = await _iSubjectTeacherRepo.SearchSubjectTeacher(Guid.Empty, Guid.Parse(IdSubject));
        lsgiangvien = new List<string>();
        foreach (var x in listTeachersInSubject)
        {
            var giangvien = await _iLecturersCPRepo.GetLecturerListById(x.IdTeacher);
            var namegiangvien = giangvien.Email;
            lsgiangvien.Add(namegiangvien);
        }
        _subjectUp = await _subjectUPRepo.GetSubjectbyId(Guid.Parse(IdSubject));
        if (IsLecterturter == false)
        {
            _lstExamFile = await _examFileRepo.GetAllExamFilesForLectuterSubject(Guid.Parse(IdUser), Guid.Parse(IdSubject));
            _lstExamFile = _lstExamFile.Where(c => c.SubjectId == Guid.Parse(IdSubject)).ToList();
            _lstExamFileForCurrentLec = await _examFileRepo.GetAllExamFilesForLectuer(Guid.Parse(IdUser));
            _lstExamFileForCurrentLec = _lstExamFileForCurrentLec.Where(c => c.SubjectId == Guid.Parse(IdSubject)).ToList();
            _lstSubforlec = await _subjectUPRepo.GetAllSubjectbyIdLecture(Guid.Parse(IdLecture));
        }

    }
    private async Task RedirectToBack()
    {
        var url = Path.Combine($"/overviewsubject/{_cryptoServices.Encrypt(maxRole.ToString()).Replace("/", "I0H")}/{_cryptoServices.Encrypt(IdLecture.ToString()).Replace("/", "I0H")}");
        navigation.NavigateTo(url);
    }
    public async Task RemoveFile(MudChip chip)
    {
        SweetAlertResult result = await Swal.FireAsync(new SweetAlertOptions
            {
                Title = $"Xác Nhận Xóa File Đề Thi",
                Text = "Bạn Có Chắc Muốn Thêm File Đề Thi Này Không ?",
                Icon = SweetAlertIcon.Warning,
                ShowCancelButton = true,
                ConfirmButtonText = "Đồng Ý",
                CancelButtonText = "Hủy"
            });

        if (!string.IsNullOrEmpty(result.Value))
        {
            //lấy ra đối tượng cần để xóa
            var getIdFile = _lstExamFile.Where(c => c.FileName == chip.Text).Select(c => c.Id).FirstOrDefault();
            IsShowWaitting = true;
            await SimulateProgress();
            var res = await _examFileRepo.DeleteExamFile(getIdFile);
            IsShowWaitting = false;
            if (res)
            {
                await Swal.FireAsync(
                "Xóa Thành Công",
                "Successfuly",
                SweetAlertIcon.Success
                );
                await GetListExamFile();

            }
            else
            {
                await Swal.FireAsync(
              "Xóa Thất Bại Do Đề đã được sử dụng",
              "Fail",
              SweetAlertIcon.Error
              );
                return;
            }

        }
        else if (result.Dismiss == DismissReason.Cancel)
        {

            //ở đây xử lý khi hủy upload
            await Swal.FireAsync(
              "Hủy",
              "Đã Hủy Xóa File",
              SweetAlertIcon.Error
              );
        }

    }
    private async Task GetListExamFile()
    {
        _lstExamFile = await _examFileRepo.GetAllExamFiles();
        _lstExamFile = _lstExamFile.Where(c => c.SubjectId == Guid.Parse(IdSubject)).ToList();
    }
    private async Task OnInputFileChanged(IFileListEntry[] files)
    {
        dropClass = "";
        fileSizeError = false;
        fileTypeError = false;

        List<string> acceptedFileTypes = new List<string>() { "application/pdf" };
        foreach (var file in files)
        {
            bool error = false;
            if (file.Name.ToLower().Count() > 50)
            {
                error = true;
                fileNameError = true;
                ErrorFileName = file.Name;
                files.ToList().Clear();
                return;
            }
            if (_lstExamFile.Any(c => c.FileName.ToLower().Contains(file.Name.ToLower())))
            {
                error = true;
                fileNameError = true;
                ErrorFileName = file.Name;
                files.ToList().Clear();
                return;

            }
            if (file.Size > MaxFileSize)
            {

                error = true;
                fileSizeError = true;
                ErrorFileName = file.Name;
                files.ToList().Clear();
                return;
            }

            if (!acceptedFileTypes.Contains(file.Type))
            {
                error = true;
                fileTypeError = true;
                ErrorFileName = file.Name;
                files.ToList().Clear();
                return;
            }

        }

        if (files.Count() > 0)
        {
            SweetAlertResult result = await Swal.FireAsync(new SweetAlertOptions
                {
                    Title = $"Xác Nhận Thêm File",
                    Text = "Bạn Có Chắc Muốn Thêm File Đề Thi Này Không ?",
                    Icon = SweetAlertIcon.Warning,
                    ShowCancelButton = true,
                    ConfirmButtonText = "Đồng Ý",
                    CancelButtonText = "Hủy"
                });

            if (!string.IsNullOrEmpty(result.Value))
            {
                foreach (var file in files)
                {
                    var attachment = await FileConverter(file);
                    ExamStorageViewModel examStorageViewModel = new ExamStorageViewModel()
                        {
                            Id = Guid.NewGuid(),
                            CreateTime = DateTime.Now,
                            FileName = file.Name,
                            ExamFile = attachment,
                            IndexOfExamStorageFile = _lstExamFile.Where(c => Guid.Parse(c.IdUserUpLoad) == Guid.Parse(IdUser)).Count() == 0 ? 1 : _lstExamFile.Where(c => Guid.Parse(c.IdUserUpLoad) == Guid.Parse(IdUser)).Max(c => c.IndexOfExamStorageFile) + 1,
                            Status = 0,
                            Note = "",
                            IdUserUpLoad = IdUser.ToString(),

                            DeleteTime = default,
                            SubjectId = _subjectUp.Id,
                            UserNameUpload = _userManager.Users.Where(c => c.Id == IdUser.ToString()).Select(c => c.UserName).FirstOrDefault(),
                            SubjectName = _subjectUp.SubjectName,
                            SubjectCode = _subjectUp.SubjectCode

                        };
                    _lstExamFileForAdding.Add(examStorageViewModel);


                }
                IsShowWaitting = true;
                await SimulateProgress();
                var res = await _examFileRepo.AddMultipleExamFile(_lstExamFileForAdding);

                IsShowWaitting = false;
                if (res)
                {
                    await Swal.FireAsync(
                    "Thêm Thành Công",
                    "Successfuly",
                    SweetAlertIcon.Success
                    );
                    await GetListExamFile();
                    fileSizeError = false;
                    fileTypeError = false;
                    fileNameError = false;

                }
                else
                {
                    await Swal.FireAsync(
                  "Thêm Thất Bại",
                  "Fail",
                  SweetAlertIcon.Error
                  );
                    return;
                }

            }
            else if (result.Dismiss == DismissReason.Cancel)
            {

                //ở đây xử lý khi hủy upload
                await Swal.FireAsync(
                  "Hủy",
                  "Đã Hủy Thêm File",
                  SweetAlertIcon.Error
                  );
            }




        }


    }
    private void HandleDragEnter()
    {
        dropClass = "dropzone-drag";
    }

    private void HandleDragLeave()
    {
        dropClass = "";
    }
    private async Task Clear()
    {
        fileNames.Clear();
        ClearDragClass();
        await Task.Delay(100);
    }
    private void Upload()
    {
        //Upload the files here
        Snackbar.Configuration.PositionClass = Defaults.Classes.Position.TopCenter;
        Snackbar.Add("TODO: Upload your files!", Severity.Normal);
    }
    public async Task<byte[]> FileConverter(IFileListEntry files)
    {
        using (var ms = new System.IO.MemoryStream())
        {
            await files.Data.CopyToAsync(ms);
            return ms.ToArray();
        }
    }


    private async Task ClearDragClass()
    {
        DragClass = DefaultDragClass;
    }

    public async Task SimulateProgress()
    {
        Value = 0;
        do
        {
            if (_disposed)
            {
                return;
            }

            Value += 8;
            StateHasChanged();
            await Task.Delay(500);

        } while (Value < 100);


    }
    public async Task SimulateProgressFast()
    {
        Value = 0;
        do
        {
            if (_disposed)
            {
                return;
            }

            Value += 22;
            StateHasChanged();
            await Task.Delay(500);

        } while (Value < 100);


    }
    bool _disposed;
    public void Dispose() => _disposed = true;

    private async Task ConnectToServer()
    {
        try
        {
            string url = "http://localhost:5001/notificationhub";
            HubConnection _connection = null;
            bool isConnected = false;
            string connectionStatus = "Closed";
            _connection = new HubConnectionBuilder()
                .WithUrl(url)
                .Build();

            await _connection.StartAsync();
            isConnected = true;
            connectionStatus = "Connected :-)";
            Console.WriteLine("SinalR Is Starting");
            _connection.Closed += async (s) =>
            {
                isConnected = false;
                connectionStatus = "Disconnected";
                await _connection.StartAsync();
                isConnected = true;
            };

            _connection.On<string>("Noticafications", async (res) =>
            {

                if (res == "Done")
                {


                    this.InvokeAsync(() => this.StateHasChanged());
                }


            });
        }
        catch (Exception ex)
        {

            //_error.ProcessError(ex);
        }
    }






#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private SweetAlertService Swal { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ISnackbar Snackbar { get; set; }
    }
}
#pragma warning restore 1591
