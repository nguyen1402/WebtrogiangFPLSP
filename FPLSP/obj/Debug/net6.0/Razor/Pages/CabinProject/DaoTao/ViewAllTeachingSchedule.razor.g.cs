#pragma checksum "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "c6dd915ab528eb73cccb0a935d5c08ce76ffd020"
// <auto-generated/>
#pragma warning disable 1591
namespace FPLSP.Pages.CabinProject.DaoTao
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using FPLSP;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using FPLSP.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using MudBlazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Blazored.Typeahead;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using CurrieTechnologies.Razor.SweetAlert2;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using System.Text;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using System.Text.RegularExpressions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using System.Diagnostics;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using Blazored.Toast.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Components.CabinProject;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Data.Securities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Repositories.Interfaces.CabinProject;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Repositories.Interfaces;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Server.Domain.Dtos;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Server.Domain.Entities.CoresParts;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Server.Infrastructure.ViewModels.CabinProject.BookingCabin;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Server.Infrastructure.ViewModels.CabinProject.BookingRequest;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Server.Infrastructure.ViewModels.CabinProject.Cabin;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Server.Infrastructure.ViewModels.CabinProject.GroupCabin;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Server.Infrastructure.ViewModels.CabinProject.ShiftOfCabin;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Server.Infrastructure.ViewModels;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using FPLSP.Server.Infrastructure.ViewModels.CabinProject.TeachingSchedule;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using Microsoft.AspNetCore.SignalR.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
using System.Globalization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
           [Authorize(Roles = "DirectorOfTraining")]

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Components.RouteAttribute("/Cabin/directorOfTraining/viewSchedule/{idTrainingFacilityNonDecrypt}")]
    public partial class ViewAllTeachingSchedule : global::Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css\" rel=\"stylesheet\" b-u6fzian4qd>\r\n\r\n");
            __builder.OpenElement(1, "body");
            __builder.AddAttribute(2, "b-u6fzian4qd");
#nullable restore
#line 29 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
     if (listLecturer == null || listShift == null || listFullShift == null || listSchedule == null || _specializedDtos == null || _groupCabinViewModels == null || _cabinViewModels == null || _listBookingCabinVM == null || _shiftOfCabinVMs == null)
    {

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<global::FPLSP.Components.LoadingIndicator>(3);
            __builder.CloseComponent();
#nullable restore
#line 32 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
    }
    else
    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(4, "<h3 b-u6fzian4qd>Chọn giảng viên để xem lịch cabin</h3>\r\n        ");
            __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.EditForm>(5);
            __builder.AddAttribute(6, "Model", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Object>(
#nullable restore
#line 36 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                         _bookingCabinVM

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(7, "ChildContent", (global::Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                global::__Blazor.FPLSP.Pages.CabinProject.DaoTao.ViewAllTeachingSchedule.TypeInference.CreateInputSelect_0(__builder2, 8, 9, "time", 10, " form-select", 11, 
#nullable restore
#line 37 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                           ()=>IdLecturer

#line default
#line hidden
#nullable disable
                , 12, 
#nullable restore
#line 37 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                                                    IdLecturer

#line default
#line hidden
#nullable disable
                , 13, global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, 
#nullable restore
#line 37 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                                                                                (string value) => CheckLecturer(value)

#line default
#line hidden
#nullable disable
                ), 14, (__builder3) => {
#nullable restore
#line 38 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                 if (string.IsNullOrEmpty(IdLecturer))
                {

#line default
#line hidden
#nullable disable
                    __builder3.OpenElement(15, "option");
                    __builder3.AddAttribute(16, "selected");
                    __builder3.AddAttribute(17, "value", 
#nullable restore
#line 40 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                              string.Empty

#line default
#line hidden
#nullable disable
                    );
                    __builder3.AddAttribute(18, "b-u6fzian4qd");
                    __builder3.AddMarkupContent(19, "Chọn giảng viên");
                    __builder3.CloseElement();
#nullable restore
#line 41 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                }
                else
                {

#line default
#line hidden
#nullable disable
                    __builder3.OpenElement(20, "option");
                    __builder3.AddAttribute(21, "value", 
#nullable restore
#line 44 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                     string.Empty

#line default
#line hidden
#nullable disable
                    );
                    __builder3.AddAttribute(22, "b-u6fzian4qd");
                    __builder3.AddMarkupContent(23, "Chọn giảng viên");
                    __builder3.CloseElement();
#nullable restore
#line 45 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 47 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                 if (listLecturer.Count() != 0)
                {
                    

#line default
#line hidden
#nullable disable
#nullable restore
#line 49 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                     foreach (var lec in listLecturer)
                    {
                        if (!string.IsNullOrEmpty(IdLecturer))
                        {
                            if (lec.Id == Guid.Parse(IdLecturer))
                            {

#line default
#line hidden
#nullable disable
                    __builder3.OpenElement(24, "option");
                    __builder3.AddAttribute(25, "selected");
                    __builder3.AddAttribute(26, "value", 
#nullable restore
#line 55 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                          lec.Id

#line default
#line hidden
#nullable disable
                    );
                    __builder3.AddAttribute(27, "b-u6fzian4qd");
#nullable restore
#line (55,70)-(55,115) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder3.AddContent(28, lec.Email.Substring(0, lec.Email.Length - 11));

#line default
#line hidden
#nullable disable
                    __builder3.CloseElement();
#nullable restore
#line 56 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                            }
                            else
                            {

#line default
#line hidden
#nullable disable
                    __builder3.OpenElement(29, "option");
                    __builder3.AddAttribute(30, "value", 
#nullable restore
#line 59 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                 lec.Id

#line default
#line hidden
#nullable disable
                    );
                    __builder3.AddAttribute(31, "b-u6fzian4qd");
#nullable restore
#line (59,61)-(59,106) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder3.AddContent(32, lec.Email.Substring(0, lec.Email.Length - 11));

#line default
#line hidden
#nullable disable
                    __builder3.CloseElement();
#nullable restore
#line 60 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                            }
                        }
                        else
                        {

#line default
#line hidden
#nullable disable
                    __builder3.OpenElement(33, "option");
                    __builder3.AddAttribute(34, "value", 
#nullable restore
#line 64 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                             lec.Id

#line default
#line hidden
#nullable disable
                    );
                    __builder3.AddAttribute(35, "b-u6fzian4qd");
#nullable restore
#line (64,57)-(64,102) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder3.AddContent(36, lec.Email.Substring(0, lec.Email.Length - 11));

#line default
#line hidden
#nullable disable
                    __builder3.CloseElement();
#nullable restore
#line 65 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                        }
                    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 66 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                     
                }

#line default
#line hidden
#nullable disable
                }
                );
            }
            ));
            __builder.CloseComponent();
#nullable restore
#line 71 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
         if (!string.IsNullOrEmpty(IdLecturer))
        {
            if (loading)
            {

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<global::FPLSP.Components.LoadingIndicator>(37);
            __builder.CloseComponent();
#nullable restore
#line 76 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
            }
            else
            {
                

#line default
#line hidden
#nullable disable
#nullable restore
#line 79 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                 if (listFullShift.Count() == 0 || listSchedule.Count() == 0)
                {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(38, "<h3 b-u6fzian4qd>Hiện chưa có lịch dạy online</h3>");
#nullable restore
#line 82 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                }
                else
                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(39, "div");
            __builder.AddAttribute(40, "class", "modal-header");
            __builder.AddAttribute(41, "b-u6fzian4qd");
            __builder.OpenElement(42, "h3");
            __builder.AddAttribute(43, "b-u6fzian4qd");
            __builder.AddMarkupContent(44, "Lịch cabin ");
#nullable restore
#line (86,41)-(86,83) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(45, daysOfWeek[0].Item2.ToString("dd/MM/yyyy"));

#line default
#line hidden
#nullable disable
            __builder.AddContent(46, "-");
#nullable restore
#line (86,85)-(86,148) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(47, daysOfWeek[daysOfWeek.Count() - 1].Item2.ToString("dd/MM/yyyy"));

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(48, " (Kì ");
#nullable restore
#line (86,154)-(86,166) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(49, semesterName);

#line default
#line hidden
#nullable disable
            __builder.AddContent(50, "-");
#nullable restore
#line (86,168)-(86,177) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(51, blockName);

#line default
#line hidden
#nullable disable
            __builder.AddContent(52, ")");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(53, "\r\n                    ");
            __builder.OpenElement(54, "div");
            __builder.AddAttribute(55, "class", "table-container");
            __builder.AddAttribute(56, "b-u6fzian4qd");
            __builder.OpenElement(57, "table");
            __builder.AddAttribute(58, "b-u6fzian4qd");
            __builder.OpenElement(59, "thead");
            __builder.AddAttribute(60, "b-u6fzian4qd");
            __builder.OpenElement(61, "tr");
            __builder.AddAttribute(62, "b-u6fzian4qd");
            __builder.AddMarkupContent(63, "<th style=\"text-align: center!important;\" b-u6fzian4qd></th>");
#nullable restore
#line 93 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                     foreach (var item in daysOfWeek)
                                    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(64, "th");
            __builder.AddAttribute(65, "style", "text-align: center!important;");
            __builder.AddAttribute(66, "b-u6fzian4qd");
#nullable restore
#line (95,84)-(95,94) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(67, item.Item1);

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(68, "<br b-u6fzian4qd>");
            __builder.OpenElement(69, "small");
            __builder.AddAttribute(70, "b-u6fzian4qd");
#nullable restore
#line (95,106)-(95,139) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(71, item.Item2.ToString("dd/MM/yyyy"));

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 96 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(72, "\r\n                            ");
            __builder.OpenElement(73, "tbody");
            __builder.AddAttribute(74, "b-u6fzian4qd");
#nullable restore
#line 100 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                 foreach (var shift in listShift.OrderBy(c => c.IndexOfShift))
                                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(75, "tr");
            __builder.AddAttribute(76, "b-u6fzian4qd");
            __builder.OpenElement(77, "td");
            __builder.AddAttribute(78, "class", "shift");
            __builder.AddAttribute(79, "b-u6fzian4qd");
#nullable restore
#line (103,60)-(103,75) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(80, shift.ShiftName);

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(81, "<br b-u6fzian4qd>");
            __builder.OpenElement(82, "small");
            __builder.AddAttribute(83, "b-u6fzian4qd");
#nullable restore
#line (103,87)-(103,122) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(84, shift.StartTime.ToString(@"hh\:mm"));

#line default
#line hidden
#nullable disable
            __builder.AddContent(85, "-");
#nullable restore
#line (103,124)-(103,157) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(86, shift.EndTime.ToString(@"hh\:mm"));

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 104 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                         foreach (var day in daysOfWeek.Select(c => c.Item2).ToList())
                                        {

                                            

#line default
#line hidden
#nullable disable
#nullable restore
#line 107 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                             if (listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day) != null)
                                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(87, "td");
            __builder.AddAttribute(88, "class", 
#nullable restore
#line 109 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                             new DateTime(day.Year,day.Month,day.Day,shift.StartTime.Hours,shift.StartTime.Minutes,shift.StartTime.Seconds) <= DateTime.Now && DateTime.Now < new DateTime(day.Year,day.Month,day.Day,shift.EndTime.Hours,shift.EndTime.Minutes,shift.EndTime.Seconds) ? "today-schedule" : ""

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(89, "b-u6fzian4qd");
            __builder.OpenElement(90, "div");
            __builder.AddAttribute(91, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 110 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                     () => Notify(listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(92, "b-u6fzian4qd");
#nullable restore
#line 111 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                         if (listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).IdCabin != null)
                                                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(93, "div");
            __builder.AddAttribute(94, "b-u6fzian4qd");
            __builder.OpenElement(95, "div");
            __builder.AddAttribute(96, "b-u6fzian4qd");
#nullable restore
#line 115 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                     if (listBookingCabin.FirstOrDefault(c => c.IdShift == shift.Id
                                                                   && c.ClassId == listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).IdClass
                                                                   && c.SubjectId == listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).IdSubject
                                                                   && c.IdLectuter == listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).IdLecturer
                                                                   && c.DateCreated == new DateTime(listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).TeachingDay.Value.Year, listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).TeachingDay.Value.Month, listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).TeachingDay.Value.Day)) != null)
                                                                    {
                                                                        

#line default
#line hidden
#nullable disable
#nullable restore
#line 121 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                         if (listBookingCabin.FirstOrDefault(c => c.IdShift == shift.Id
                                                                       && c.ClassId == listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).IdClass
                                                                       && c.SubjectId == listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).IdSubject
                                                                       && c.IdLectuter == listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).IdLecturer
                                                                       && c.DateCreated == new DateTime(listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).TeachingDay.Value.Year, listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).TeachingDay.Value.Month, listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).TeachingDay.Value.Day)).CheckinImage != null)
                                                                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(97, "small");
            __builder.AddAttribute(98, "style", "float:left; font-size: 9px;");
            __builder.AddAttribute(99, "b-u6fzian4qd");
            __builder.AddMarkupContent(100, "<i class=\"fas fa-check-circle\" style=\"margin: 0 3px; color: greenyellow;\" b-u6fzian4qd></i>\r\n                                                                                ");
            __builder.OpenElement(101, "img");
            __builder.AddAttribute(102, "src", 
#nullable restore
#line 129 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                                            Encoding.ASCII.GetString(listBookingCabin.FirstOrDefault(c => c.DateCreated == new DateTime(listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).TeachingDay.Value.Year, listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).TeachingDay.Value.Month, listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).TeachingDay.Value.Day) && c.IdShift == shift.Id && c.ClassId == listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).IdClass && c.SubjectId == listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).IdSubject && c.IdLectuter == listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).IdLecturer).CheckinImage)

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(103, "style", "width:16px;height:16px; object-fit:cover;");
            __builder.AddAttribute(104, "b-u6fzian4qd");
            __builder.CloseElement();
            __builder.AddMarkupContent(105, "\r\n                                                                                Đã CheckIn\r\n                                                                            ");
            __builder.CloseElement();
#nullable restore
#line 133 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 133 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                         
                                                                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(106, "\r\n                                                                ");
            __builder.OpenElement(107, "div");
            __builder.AddAttribute(108, "b-u6fzian4qd");
            __builder.OpenElement(109, "small");
            __builder.AddAttribute(110, "style", "float:right; font-size: 9px;");
            __builder.AddAttribute(111, "b-u6fzian4qd");
            __builder.AddMarkupContent(112, "<i class=\"fas fa-circle\" style=\"margin: 0 3px; color: greenyellow;\" b-u6fzian4qd></i>");
#nullable restore
#line (138,146)-(138,243) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(113, listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).CabinName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 142 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                        }
                                                        else
                                                        {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(114, "<small style=\"float:right; font-size: 9px;\" b-u6fzian4qd><i class=\"far fa-circle\" style=\"margin: 0 3px; color: red;\" b-u6fzian4qd></i>Chờ xếp phòng\r\n                                                            </small>");
#nullable restore
#line 148 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                        }

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(115, "<br b-u6fzian4qd>Lớp: ");
#nullable restore
#line (150,67)-(150,164) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(116, listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).ClassName);

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(117, "\r\n                                                        <br b-u6fzian4qd>Môn: ");
#nullable restore
#line (151,67)-(151,166) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(118, listFullShift.FirstOrDefault(c => c.IdShiftOfCabin == shift.Id && c.TeachingDay == day).SubjectCode);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 154 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                            }
                                            else
                                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(119, "td");
            __builder.AddAttribute(120, "class", 
#nullable restore
#line 157 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                             new DateTime(day.Year,day.Month,day.Day,shift.StartTime.Hours,shift.StartTime.Minutes,shift.StartTime.Seconds) <= DateTime.Now && DateTime.Now < new DateTime(day.Year,day.Month,day.Day,shift.EndTime.Hours,shift.EndTime.Minutes,shift.EndTime.Seconds) ? "today-schedule" : ""

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(121, "style", "background-color: #f9fafb63;");
            __builder.AddAttribute(122, "b-u6fzian4qd");
            __builder.AddMarkupContent(123, "<p style=\"text-align: center!important;\" b-u6fzian4qd>TRỐNG</p>");
            __builder.CloseElement();
#nullable restore
#line 160 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 160 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                             

                                        }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 164 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.OpenElement(124, "div");
            __builder.AddAttribute(125, "hidden", 
#nullable restore
#line 169 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                  hiddenCabin

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(126, "b-u6fzian4qd");
            __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.EditForm>(127);
            __builder.AddAttribute(128, "Model", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Object>(
#nullable restore
#line 170 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                         _bookingCabinVM

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(129, "ChildContent", (global::Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                __builder2.OpenElement(130, "div");
                __builder2.AddAttribute(131, "class", "baophong col-lg-7 notice-room");
                __builder2.AddAttribute(132, "b-u6fzian4qd");
                __builder2.OpenElement(133, "div");
                __builder2.AddAttribute(134, "class", "row");
                __builder2.AddAttribute(135, "b-u6fzian4qd");
                __builder2.OpenElement(136, "button");
                __builder2.AddAttribute(137, "type", "button");
                __builder2.AddAttribute(138, "class", "m-2 d-flex justify-content-end");
                __builder2.AddAttribute(139, "aria-label", "Close");
                __builder2.AddAttribute(140, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 173 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                                                                                () => {hiddenCabin=true;}

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(141, "b-u6fzian4qd");
                __builder2.AddMarkupContent(142, "<h5 b-u6fzian4qd>x</h5>");
                __builder2.CloseElement();
                __builder2.CloseElement();
#nullable restore
#line 177 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                 if (IdClassForDetails != Guid.Empty && IdLecturerForDetails != Guid.Empty && IdSubjectForDetails != Guid.Empty && IdShiftForDetails != Guid.Empty && TeachingDayForDetails != null)
                                {

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(143, "div");
                __builder2.AddAttribute(144, "class", " row");
                __builder2.AddAttribute(145, "b-u6fzian4qd");
                __builder2.OpenElement(146, "h3");
                __builder2.AddAttribute(147, "class", "name-cabins");
                __builder2.AddAttribute(148, "b-u6fzian4qd");
#nullable restore
#line (180,66)-(180,76) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(149, _titleRoom);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.AddMarkupContent(150, "\r\n                                        ");
                __builder2.OpenElement(151, "h5");
                __builder2.AddAttribute(152, "style", "text-align:center;");
                __builder2.AddAttribute(153, "b-u6fzian4qd");
                __builder2.AddMarkupContent(154, "<i class=\"fa-regular fa-calendar\" style=\"color: #0d4df0e3;\" b-u6fzian4qd></i> ");
#nullable restore
#line (181,138)-(181,194) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(155, FullStartTime.ToString("dddd", new CultureInfo("vi-VN")));

#line default
#line hidden
#nullable disable
                __builder2.AddMarkupContent(156, ", ngày ");
#nullable restore
#line (181,202)-(181,230) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(157, FullStartTime.ToString("dd"));

#line default
#line hidden
#nullable disable
                __builder2.AddMarkupContent(158, " tháng ");
#nullable restore
#line (181,238)-(181,266) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(159, FullStartTime.ToString("MM"));

#line default
#line hidden
#nullable disable
                __builder2.AddMarkupContent(160, " <i class=\"fa-regular fa-calendar\" style=\"color: #0d4df0e3;\" b-u6fzian4qd></i>");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(161, "\r\n                                        ");
                __builder2.OpenElement(162, "h5");
                __builder2.AddAttribute(163, "style", "text-align:center;");
                __builder2.AddAttribute(164, "b-u6fzian4qd");
#nullable restore
#line (182,74)-(182,93) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(165, ShiftNameForDetails);

#line default
#line hidden
#nullable disable
                __builder2.AddContent(166, ": ");
#nullable restore
#line (182,97)-(182,128) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(167, FullStartTime.ToString("HH:mm"));

#line default
#line hidden
#nullable disable
                __builder2.AddContent(168, " - ");
#nullable restore
#line (182,132)-(182,161) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(169, FullEndTime.ToString("HH:mm"));

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
#nullable restore
#line 184 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                         if (IdCabinForDetails != Guid.Empty)
                                        {

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(170, "h5");
                __builder2.AddAttribute(171, "style", "margin: 10px 0 5px 25px;  text-align:center;");
                __builder2.AddAttribute(172, "b-u6fzian4qd");
                __builder2.AddMarkupContent(173, "\r\n                                                Cabin của ");
                __builder2.OpenElement(174, "a");
                __builder2.AddAttribute(175, "style", "text-decoration: underline;");
                __builder2.AddAttribute(176, "b-u6fzian4qd");
#nullable restore
#line (187,99)-(187,121) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(177, LecturerNameForDetails);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.OpenElement(178, "div");
                __builder2.AddAttribute(179, "class", "container");
                __builder2.AddAttribute(180, "b-u6fzian4qd");
                __builder2.OpenElement(181, "div");
                __builder2.AddAttribute(182, "class", "card");
                __builder2.AddAttribute(183, "b-u6fzian4qd");
                __builder2.OpenElement(184, "h2");
                __builder2.AddAttribute(185, "class", "title");
                __builder2.AddAttribute(186, "b-u6fzian4qd");
#nullable restore
#line (192,72)-(192,91) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(187, CabinNameForDetails);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.AddMarkupContent(188, "\r\n                                                    ");
                __builder2.OpenElement(189, "div");
                __builder2.AddAttribute(190, "class", "card-hidden");
                __builder2.AddAttribute(191, "b-u6fzian4qd");
                __builder2.OpenElement(192, "h2");
                __builder2.AddAttribute(193, "style", "line-height:55px;");
                __builder2.AddAttribute(194, "b-u6fzian4qd");
#nullable restore
#line (194,88)-(194,107) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(195, CabinNameForDetails);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.AddMarkupContent(196, "\r\n                                                        ");
                __builder2.OpenElement(197, "b");
                __builder2.AddAttribute(198, "b-u6fzian4qd");
                __builder2.AddMarkupContent(199, "<b style=\"text-decoration:underline;\" b-u6fzian4qd>GV</b>:  ");
#nullable restore
#line (195,108)-(195,130) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(200, LecturerNameForDetails);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.AddMarkupContent(201, "\r\n                                                        ");
                __builder2.OpenElement(202, "p");
                __builder2.AddAttribute(203, "b-u6fzian4qd");
                __builder2.AddMarkupContent(204, "<span b-u6fzian4qd>Lớp</span>:  ");
#nullable restore
#line (196,80)-(196,106) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(205, ClassSubjectNameForDetails);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.AddMarkupContent(206, "\r\n                                                        ");
                __builder2.OpenElement(207, "a");
                __builder2.AddAttribute(208, "class", "button btn btn-danger my-2");
                __builder2.AddAttribute(209, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 197 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                                                        ()=>ClickCloseCabin()

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(210, "b-u6fzian4qd");
                __builder2.AddMarkupContent(211, "Hủy cabin");
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(212, "\r\n                                                <div class=\"card-border\" b-u6fzian4qd></div>");
                __builder2.CloseElement();
#nullable restore
#line 203 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                        }
                                        else
                                        {
                                            if (_cabinViewModels.Where(c => c.Status != 1).ToList().Count > 0)
                                            {
                                                

#line default
#line hidden
#nullable disable
#nullable restore
#line 208 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                 foreach (var item in _specializedDtos.Where(c => _groupCabinViewModels.Where(x => x.Status != 1).Select(x => x.IdSpec).Distinct().Contains(c.Id) && c.Status != 1))
                                                {
                                                    if ((_cabinViewModels.Where(c => (_groupCabinViewModels.Where(x => x.IdSpec == item.Id && c.Status != 1).Select(x => x.IdCabin)).Contains(c.Id) && ((_listBookingCabinVM.Any(y => y.IdCabin == c.Id && y.Status == 1) || !_listBookingCabinVM.Any(z => z.IdCabin == c.Id && z.SubjectId == IdSubjectForDetails && z.ClassId == IdClassForDetails && z.IdShift == IdShiftForDetails))))).ToList().Count > 0)
                                                    {

#line default
#line hidden
#nullable disable
                __builder2.AddMarkupContent(213, "<hr class=\"hr-room\" b-u6fzian4qd>\r\n                                                        ");
                __builder2.OpenElement(214, "h5");
                __builder2.AddAttribute(215, "style", "text-align: center;");
                __builder2.AddAttribute(216, "b-u6fzian4qd");
#nullable restore
#line (214,62)-(214,85) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(217, item.SpecializationName);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
#nullable restore
#line 216 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                    }
                                                    if (_cabinViewModels.Where(c => (_groupCabinViewModels.Where(x => x.IdSpec == item.Id && x.Status != 1).Select(x => x.IdCabin)).Contains(c.Id) && c.Status != 1).OrderBy(c => c.CabinName).ToList().Count > 0)
                                                    {
                                                        

#line default
#line hidden
#nullable disable
#nullable restore
#line 219 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                         foreach (var item1 in _cabinViewModels.Where(c => (_groupCabinViewModels.Where(x => x.IdSpec == item.Id && x.Status != 1).Select(x => x.IdCabin)).Contains(c.Id) && c.Status != 1).OrderBy(c => c.CabinName))
                                                        {
                                                            

#line default
#line hidden
#nullable disable
#nullable restore
#line 221 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                             if (!_listBookingCabinVM.Any(c => c.Status == 0 && c.IdCabin == item1.Id && c.IdShift == IdShiftForDetails && c.DateCreated == new DateTime(FullStartTime.Year, FullStartTime.Month, FullStartTime.Day)))
                                                            {

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(218, "button");
                __builder2.AddAttribute(219, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 223 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                                  ()=>ClickCabin(item1.Id)

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(220, "class", "roomRequest");
                __builder2.AddAttribute(221, "b-u6fzian4qd");
                __builder2.OpenElement(222, "span");
                __builder2.AddAttribute(223, "b-u6fzian4qd");
                __builder2.OpenElement(224, "b");
                __builder2.AddAttribute(225, "style", "font-size:1.3em;");
                __builder2.AddAttribute(226, "b-u6fzian4qd");
#nullable restore
#line (224,104)-(224,119) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(227, item1.CabinName);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(228, "\r\n                                                                    ");
                __builder2.AddMarkupContent(229, "<h4 class=\"my-2 mx-2\" b-u6fzian4qd><i class=\"fas fa-chalkboard-teacher mx-2\" style=\"color: #fff;\" b-u6fzian4qd></i></h4>");
                __builder2.CloseElement();
#nullable restore
#line 229 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 229 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                             
                                                        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 230 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                         
                                                    }
                                                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 232 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                 
                                                if ((_cabinViewModels.Any(x => !_groupCabinViewModels.Where(c => c.Status != 1).Select(m => m.IdCabin).Contains(x.Id) && x.Status != 1)))
                                                {

#line default
#line hidden
#nullable disable
                __builder2.AddMarkupContent(230, "<hr class=\"hr-room\" b-u6fzian4qd>\r\n                                                    ");
                __builder2.AddMarkupContent(231, "<h5 style=\"text-align: center;\" b-u6fzian4qd>\r\n                                                        Chuyên ngành khác\r\n                                                    </h5>");
#nullable restore
#line 239 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                     foreach (var item1 in _cabinViewModels.Where(x => !_groupCabinViewModels.Where(c => c.Status != 1).Select(m => m.IdCabin).Contains(x.Id) && x.Status != 1).OrderBy(c => c.CabinName))
                                                    {
                                                        

#line default
#line hidden
#nullable disable
#nullable restore
#line 241 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                         if (!_listBookingCabinVM.Any(c => c.Status == 0 && c.IdCabin == item1.Id && c.IdShift == IdShiftForDetails && c.DateCreated == new DateTime(FullStartTime.Year, FullStartTime.Month, FullStartTime.Day)))
                                                        {

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(232, "button");
                __builder2.AddAttribute(233, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 243 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                              ()=>ClickCabin(item1.Id)

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(234, "class", "roomRequest");
                __builder2.AddAttribute(235, "b-u6fzian4qd");
                __builder2.OpenElement(236, "span");
                __builder2.AddAttribute(237, "b-u6fzian4qd");
                __builder2.OpenElement(238, "b");
                __builder2.AddAttribute(239, "style", "font-size:1.3em;");
                __builder2.AddAttribute(240, "b-u6fzian4qd");
#nullable restore
#line (244,100)-(244,115) 27 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder2.AddContent(241, item1.CabinName);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(242, "\r\n                                                                ");
                __builder2.AddMarkupContent(243, "<h4 class=\"my-2 mx-2\" b-u6fzian4qd><i class=\"fas fa-chalkboard-teacher mx-2\" style=\"color: #fff;\" b-u6fzian4qd></i></h4>");
                __builder2.CloseElement();
#nullable restore
#line 249 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 249 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                         
                                                    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 250 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                     

                                                }
                                            }
                                            else
                                            {

#line default
#line hidden
#nullable disable
                __builder2.AddMarkupContent(244, "<h5 style=\"text-align:center;\" b-u6fzian4qd>Không có cabin nào còn trống</h5>");
#nullable restore
#line 257 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                            }



#line default
#line hidden
#nullable disable
#nullable restore
#line 312 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                          }

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
#nullable restore
#line 314 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                }

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.AddMarkupContent(245, "\r\n                    <div class=\"py-2\" b-u6fzian4qd></div>");
#nullable restore
#line 319 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 319 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                 
            }
        }
        else
        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(246, "div");
            __builder.AddAttribute(247, "class", "modal-header");
            __builder.AddAttribute(248, "b-u6fzian4qd");
            __builder.OpenElement(249, "h5");
            __builder.AddAttribute(250, "b-u6fzian4qd");
            __builder.AddMarkupContent(251, "Lịch cabin ");
#nullable restore
#line (325,33)-(325,75) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(252, daysOfWeek[0].Item2.ToString("dd/MM/yyyy"));

#line default
#line hidden
#nullable disable
            __builder.AddContent(253, "-");
#nullable restore
#line (325,77)-(325,140) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(254, daysOfWeek[daysOfWeek.Count() - 1].Item2.ToString("dd/MM/yyyy"));

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(255, " (Kì ");
#nullable restore
#line (325,146)-(325,158) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(256, semesterName);

#line default
#line hidden
#nullable disable
            __builder.AddContent(257, "-");
#nullable restore
#line (325,160)-(325,169) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(258, blockName);

#line default
#line hidden
#nullable disable
            __builder.AddContent(259, ")");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(260, "\r\n            ");
            __builder.OpenElement(261, "div");
            __builder.AddAttribute(262, "class", "table-container");
            __builder.AddAttribute(263, "b-u6fzian4qd");
            __builder.OpenElement(264, "table");
            __builder.AddAttribute(265, "b-u6fzian4qd");
            __builder.OpenElement(266, "thead");
            __builder.AddAttribute(267, "b-u6fzian4qd");
            __builder.OpenElement(268, "tr");
            __builder.AddAttribute(269, "b-u6fzian4qd");
            __builder.AddMarkupContent(270, "<th style=\"text-align: center!important;\" b-u6fzian4qd></th>");
#nullable restore
#line 332 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                             foreach (var item in daysOfWeek)
                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(271, "th");
            __builder.AddAttribute(272, "style", "text-align: center!important;");
            __builder.AddAttribute(273, "b-u6fzian4qd");
#nullable restore
#line (334,76)-(334,86) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(274, item.Item1);

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(275, "<br b-u6fzian4qd>");
            __builder.OpenElement(276, "small");
            __builder.AddAttribute(277, "b-u6fzian4qd");
#nullable restore
#line (334,98)-(334,131) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(278, item.Item2.ToString("dd/MM/yyyy"));

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 335 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(279, "\r\n                    ");
            __builder.OpenElement(280, "tbody");
            __builder.AddAttribute(281, "b-u6fzian4qd");
#nullable restore
#line 339 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                         foreach (var shift in listShift.OrderBy(c => c.IndexOfShift))
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(282, "tr");
            __builder.AddAttribute(283, "b-u6fzian4qd");
            __builder.OpenElement(284, "td");
            __builder.AddAttribute(285, "class", "shift");
            __builder.AddAttribute(286, "b-u6fzian4qd");
#nullable restore
#line (342,52)-(342,67) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(287, shift.ShiftName);

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(288, "<br b-u6fzian4qd>");
            __builder.OpenElement(289, "small");
            __builder.AddAttribute(290, "b-u6fzian4qd");
#nullable restore
#line (342,79)-(342,114) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(291, shift.StartTime.ToString(@"hh\:mm"));

#line default
#line hidden
#nullable disable
            __builder.AddContent(292, "-");
#nullable restore
#line (342,116)-(342,149) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
__builder.AddContent(293, shift.EndTime.ToString(@"hh\:mm"));

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 343 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                 foreach (var day in daysOfWeek.Select(c => c.Item2).ToList())
                                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(294, "td");
            __builder.AddAttribute(295, "class", 
#nullable restore
#line 345 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                 new DateTime(day.Year,day.Month,day.Day,shift.StartTime.Hours,shift.StartTime.Minutes,shift.StartTime.Seconds) <= DateTime.Now && DateTime.Now < new DateTime(day.Year,day.Month,day.Day,shift.EndTime.Hours,shift.EndTime.Minutes,shift.EndTime.Seconds) ? "today-schedule" : ""

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(296, "style", "background-color: #f9fafb63;");
            __builder.AddAttribute(297, "b-u6fzian4qd");
            __builder.AddMarkupContent(298, "<p style=\"text-align: center!important;\" b-u6fzian4qd>TRỐNG</p>");
            __builder.CloseElement();
#nullable restore
#line 348 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 350 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                        }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 354 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"

        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 355 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
         
    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(299, "\r\n");
            __builder.OpenComponent<global::FPLSP.Components.CabinProject.ConfirmBookingRequest>(300);
            __builder.AddAttribute(301, "ConfirmationMessage", "Thông tin chọn cabin:");
            __builder.AddAttribute(302, "ConfirmationTitle", "Thông tin chọn cabin");
            __builder.AddAttribute(303, "IdCabin", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Guid>(
#nullable restore
#line 361 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                 Guid.Parse(IdCabinForDetails.ToString())

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(304, "IdClass", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Guid>(
#nullable restore
#line 362 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                 Guid.Parse(IdClassForDetails.ToString())

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(305, "IdLecturer", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Guid>(
#nullable restore
#line 363 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                    Guid.Parse(IdLecturerForDetails.ToString())

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(306, "ShiftName", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.String>(
#nullable restore
#line 364 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                   ShiftNameForDetails

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(307, "Day", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.DateTime>(
#nullable restore
#line 365 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                             FullStartTime

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(308, "ConfirmationChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::System.String>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::System.String>(this, 
#nullable restore
#line 366 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                            OnConfirmationSubmit

#line default
#line hidden
#nullable disable
            )));
            __builder.AddComponentReferenceCapture(309, (__value) => {
#nullable restore
#line 366 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                        Confirmsubmit = (FPLSP.Components.CabinProject.ConfirmBookingRequest)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.AddMarkupContent(310, "\r\n\r\n");
            __builder.OpenComponent<global::FPLSP.Components.CabinProject.ConfirmBookingRequest>(311);
            __builder.AddAttribute(312, "ConfirmationMessage", "Bạn muốn hủy cabin:");
            __builder.AddAttribute(313, "ConfirmationTitle", "Thông tin hủy cabin");
            __builder.AddAttribute(314, "IdCabin", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Guid>(
#nullable restore
#line 370 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                 Guid.Parse(IdCabinForDetails.ToString())

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(315, "IdClass", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Guid>(
#nullable restore
#line 371 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                 Guid.Parse(IdClassForDetails.ToString())

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(316, "IdLecturer", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Guid>(
#nullable restore
#line 372 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                    Guid.Parse(IdLecturerForDetails.ToString())

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(317, "ShiftName", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.String>(
#nullable restore
#line 373 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                   ShiftNameForDetails

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(318, "Day", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.DateTime>(
#nullable restore
#line 374 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                             FullStartTime

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(319, "CheckConfirm", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Int32>(
#nullable restore
#line 375 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                     1

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(320, "ConfirmationChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::System.String>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::System.String>(this, 
#nullable restore
#line 376 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                            OnConfirmationClose

#line default
#line hidden
#nullable disable
            )));
            __builder.AddComponentReferenceCapture(321, (__value) => {
#nullable restore
#line 376 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
                                                                       Confirmclose = (FPLSP.Components.CabinProject.ConfirmBookingRequest)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
        }
        #pragma warning restore 1998
#nullable restore
#line 378 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\CabinProject\DaoTao\ViewAllTeachingSchedule.razor"
       
    [Parameter]
    public string idTrainingFacilityNonDecrypt { get; set; }
    public string idTrainingFacility { get; set; }

    [Inject] public CryptoServices _cryptoServices { get; set; }
    [Inject] ITaskRepositories<ClassUPViewModel> subjectClassRepo { get; set; }
    [Inject] ITeachingScheduleApiClient teachingScheduleApiClient { get; set; }
    [Inject] public IBookingCabinApiClient _bookingCabinApiClient { get; set; }
    [Inject] IShiftOfCabinApiClient shiftOfCabinApiClient { get; set; }
    [Inject] IBlockRepo blockRepo { get; set; }
    [Inject] ISemesterRepo semesterRepo { get; set; }
    [Inject] private IToastService _toastService { get; set; }

    DateTime date;
    string blockName;
    string semesterName;
    List<(string, DateTime)> daysOfWeek = new List<(string, DateTime)>();
    List<ShiftOfCabinVM> listShift;
    List<ShiftOfCabinFullVM> listFullShift;
    //List<ClassUPViewModel> listSubClass;
    List<TeachingScheduleVM> listSchedule;
    List<BookingCabinVM>? listBookingCabin;

    public Guid? IdClassForDetails = Guid.Empty;
    public Guid? IdSubjectForDetails = Guid.Empty;
    public Guid? IdLecturerForDetails = Guid.Empty;
    public Guid? IdShiftForDetails = Guid.Empty;
    public Guid? IdCabinForDetails = Guid.Empty;
    public string? ClassSubjectNameForDetails;
    public string? LecturerNameForDetails;
    public string? ShiftNameForDetails;
    public string? CabinNameForDetails;
    public DateTime? TeachingDayForDetails;
    public TimeSpan? StartShiftForDetails;
    public TimeSpan? EndShiftForDetails;

    [Inject] private IBookingRequestRepo _bookingRequestRepo { get; set; }
    [Inject] private IBookingCabinApiClient _ibookingCabinApiClient { get; set; }
    [Inject] private ICabinRepo _icabinRepo { get; set; }
    [Inject] private ISubjectsSpecializedUPRepo _iSubjectsSpecializedUP { get; set; }
    [Inject] private ILecturersCPRepo _ilecturersCPRepo { get; set; }
    [Inject] private ITaskRepositories<ClassUPViewModel> _iClassRepo { get; set; }
    [Inject] private ISpecializedUPRepo _ispecializedUPRepo { get; set; }
    [Inject] private IClassSubjectApiClient _iclassSubjectApi { get; set; }
    [Inject] private ISubjectUPRepo _isubjectUPRepo { get; set; }
    [Inject] private IToastService _itoastService { get; set; }
    [Inject] private IGroupCabinRepo _igroupCabinRepo { get; set; }
    [Inject] private IShiftOfCabinApiClient _ishiftOfCabinApiClient { get; set; }
    [Inject] private ITeachingScheduleApiClient _teachingScheduleApiClient { get; set; }
    [Inject] ILecturersCPRepo lecturersCPRepo { get; set; }

    public string? IdLecturer = null;
    List<LecturersCP> listLecturer;

    private BookingCabinVM _bookingCabinVM = new BookingCabinVM();
    private List<ShiftOfCabinVM> _shiftOfCabinVMs;
    private List<SpecializedDto> _specializedDtos;
    private List<GroupCabinViewModel> _groupCabinViewModels;
    private List<CabinViewModel> _cabinViewModels;
    private List<BookingCabinVM> _listBookingCabinVM;
    private DateTime FullStartTime = DateTime.Now;
    private DateTime FullEndTime = DateTime.Now;
    private bool hiddenCabin = true;

    protected ConfirmBookingRequest Confirmsubmit { get; set; }
    protected ConfirmBookingRequest Confirmclose { get; set; }
    private string _titleRoom = "Danh sách cabin còn trống";
    private string? _contenFeedBack = "";

    string idFilterLecturer = null;
    bool loading = true;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            idTrainingFacility = _cryptoServices.Decrypt(idTrainingFacilityNonDecrypt.Replace("cabin", "/"));

            try
            {
                string url = "http://localhost:5001/SignalRCabinHub";
                HubConnection _connection = null;
                bool isConnected = false;
                string connectionStatus = "Closed";
                _connection = new HubConnectionBuilder()
                    .WithUrl(url)
                    .Build();

                await _connection.StartAsync();
                isConnected = true;
                connectionStatus = "Connected :-)";

                _connection.Closed += async (s) =>
                {
                    isConnected = false;
                    connectionStatus = "Disconnected";
                    await _connection.StartAsync();
                    isConnected = true;
                };

                _connection.On<string>("SignalRCabins", async (res) =>
                {
                    if (res == "Done")
                    {
                        await OnInitializedAsync();

                        await this.InvokeAsync(() => this.StateHasChanged());
                    }
                });

                _connection.On<string>("SignalRGroupCabins", async (res) =>
                {
                    if (res == "Done")
                    {
                        await OnInitializedAsync();

                        await this.InvokeAsync(() => this.StateHasChanged());
                    }
                });

                _connection.On<string>("SignalRBookingCabins", async (res) =>
                {
                    if (res == "Done")
                    {
                        await OnInitializedAsync();

                        await this.InvokeAsync(() => this.StateHasChanged());
                    }
                });

                _connection.On<string>("SignalRTeachingSchedules", async (res) =>
                {
                    if (res == "Done")
                    {
                        await OnInitializedAsync();

                        await this.InvokeAsync(() => this.StateHasChanged());
                    }
                });

                _connection.On<string>("SignalRSemesterBlocks", async (res) =>
                {
                    if (res == "Done")
                    {
                        await OnInitializedAsync();

                        await this.InvokeAsync(() => this.StateHasChanged());
                    }
                });

            }
            catch (Exception)
            {

            }
            finally
            {
                await GetTaskAsync(IdLecturer);
                await GetTasks();
            }
        }
        catch
        {
            // Lịch học rỗng
            listLecturer = new();
            listSchedule = new List<TeachingScheduleVM>();
            listShift = new List<ShiftOfCabinVM>();
            listFullShift = new List<ShiftOfCabinFullVM>();
            _specializedDtos = new();
            _groupCabinViewModels = new();
            _cabinViewModels = new();
            _listBookingCabinVM = new();
            _shiftOfCabinVMs = new();
        }
    }

    public async Task CheckLecturer(string value)
    {
        IdLecturer = value;
        await GetTaskAsync(IdLecturer);
        await GetTasks();
    }

    private async Task GetTasks()
    {
        _specializedDtos = await _ispecializedUPRepo.GetAll();
        _specializedDtos = _specializedDtos == null ? new() : _specializedDtos;
        _groupCabinViewModels = await _igroupCabinRepo.GetAllGroupCabinAsync();
        _groupCabinViewModels = _groupCabinViewModels == null ? new() : _groupCabinViewModels;
        var cabinVM = await _icabinRepo.GetAllCabinAsync();
        cabinVM = cabinVM == null ? new() : cabinVM;
        _cabinViewModels = cabinVM.Where(c => c.IdTrainingFacility == Guid.Parse(idTrainingFacility)).ToList();
        _listBookingCabinVM = await _ibookingCabinApiClient.GetAll();
        _listBookingCabinVM = _listBookingCabinVM == null ? new() : _listBookingCabinVM;
        _shiftOfCabinVMs = await _ishiftOfCabinApiClient.GetAll();
        _shiftOfCabinVMs = _shiftOfCabinVMs == null ? new() : _shiftOfCabinVMs;
    }

    private async Task GetTaskAsync(string? idLecturer)
    {
        loading = true;
        LoadDaysOfWeek(DateTime.Now);

        listFullShift = await shiftOfCabinApiClient.GetAllInformationOfShiftOfCabin();
        listLecturer = await lecturersCPRepo.GetAllLecturerAsync();
        listLecturer = listLecturer.Where(c => c.TrainingFacilitiesId == Guid.Parse(idTrainingFacility) && listFullShift.Any(x => x.IdLecturer == c.Id)).OrderBy(c => c.Email).ToList();

        listSchedule = await teachingScheduleApiClient.GetAll();
        listSchedule = listSchedule == null ? new List<TeachingScheduleVM>() : listSchedule;
        var listBlock = await blockRepo.GetAll();
        var listSemester = await semesterRepo.GetAll();

        date = DateTime.Now;
        blockName = listBlock.FirstOrDefault(c => c.Status == 0 && c.Id == listSchedule.FirstOrDefault(c => c.Status == 0).IdBlock).NameOfBlock;
        semesterName = listSemester.FirstOrDefault(c => c.Status == 0 && c.Id == listSchedule.FirstOrDefault(c => c.Status == 0).IdSemester).NameofSemester;
        LoadDaysOfWeek(date);
        listShift = await shiftOfCabinApiClient.GetAll();
        listShift = listShift == null ? new List<ShiftOfCabinVM>() : listShift.Where(c => c.Status != 1).ToList();

        if (!string.IsNullOrEmpty(idLecturer))
        {
            //listSubClass = await subjectClassRepo.GetAllClass();
            //listSubClass = listSubClass == null ? new() : listSubClass.Where(c => c.HomeroomLecturerId == Guid.Parse(idLecturer)).ToList();

            listSchedule = await teachingScheduleApiClient.GetAll();
            listSchedule = listSchedule == null ? new List<TeachingScheduleVM>() : listSchedule.Where(c => c.Status == 0 && c.IdLecturter == Guid.Parse(idLecturer)).ToList();

            listBlock = await blockRepo.GetAll();
            listSemester = await semesterRepo.GetAll();

            date = DateTime.Now;
            blockName = listBlock.FirstOrDefault(c => c.Status == 0 && c.Id == listSchedule.FirstOrDefault(c => c.Status == 0).IdBlock).NameOfBlock;
            semesterName = listSemester.FirstOrDefault(c => c.Status == 0 && c.Id == listSchedule.FirstOrDefault(c => c.Status == 0).IdSemester).NameofSemester;
            LoadDaysOfWeek(date);

            listFullShift = await shiftOfCabinApiClient.GetAllInformationOfShiftOfCabin();
            listFullShift = listFullShift == null ? new List<ShiftOfCabinFullVM>() : listFullShift.Where(c => c.IdLecturer == Guid.Parse(idLecturer)).ToList();

            listBookingCabin = await _bookingCabinApiClient.GetAll();
            listBookingCabin = listBookingCabin == null ? new() : listBookingCabin.Where(c => c.Status != 1).ToList();
        }
        else
        {
            listBookingCabin = new();
        }
        loading = false;
    }

    public async Task Notify(ShiftOfCabinFullVM obj)
    {
        IdClassForDetails = Guid.Parse(obj.IdClass.ToString());
        IdSubjectForDetails = Guid.Parse(obj.IdSubject.ToString());
        IdLecturerForDetails = Guid.Parse(obj.IdLecturer.ToString());
        IdShiftForDetails = Guid.Parse(obj.IdShiftOfCabin.ToString());
        IdCabinForDetails = obj.IdCabin == null ? Guid.Empty : Guid.Parse(obj.IdCabin.ToString());
        ClassSubjectNameForDetails = obj.ClassName + " - " + obj.SubjectCode;
        LecturerNameForDetails = obj.LecturerUserName;
        ShiftNameForDetails = obj.ShiftName;
        CabinNameForDetails = obj.CabinName;
        TeachingDayForDetails = obj.TeachingDay.Value;
        StartShiftForDetails = obj.StartTimeOfShift.Value;
        EndShiftForDetails = obj.EndTimeOfShift.Value;

        FullStartTime = new DateTime(TeachingDayForDetails.Value.Year, TeachingDayForDetails.Value.Month, TeachingDayForDetails.Value.Day, StartShiftForDetails.Value.Hours, StartShiftForDetails.Value.Minutes, StartShiftForDetails.Value.Seconds);
        FullEndTime = new DateTime(TeachingDayForDetails.Value.Year, TeachingDayForDetails.Value.Month, TeachingDayForDetails.Value.Day, EndShiftForDetails.Value.Hours, EndShiftForDetails.Value.Minutes, EndShiftForDetails.Value.Seconds);

        hiddenCabin = false;
    }

    private async Task ClickCloseCabin()
    {
        if (DateTime.Now < FullEndTime)
        {
            Confirmclose.Day = FullStartTime;
            Confirmclose.IdCabin = Guid.Parse(IdCabinForDetails.ToString());
            Confirmclose.IdClass = Guid.Parse(IdClassForDetails.ToString());
            Confirmclose.IdLecturer = Guid.Parse(IdLecturerForDetails.ToString());
            Confirmclose.IdSubject = Guid.Parse(IdSubjectForDetails.ToString());
            Confirmclose.ShiftName = ShiftNameForDetails;
            Confirmclose.show();
        }
        else
        {
            _toastService.ShowError($"Đã quá thời gian xếp/hủy cabin");
        }
    }

    private async Task ClickCabin(Guid idCabin)
    {
        hiddenCabin = true;
        if (DateTime.Now < FullEndTime)
        {
            IdCabinForDetails = idCabin;
            Confirmsubmit.Day = FullStartTime;
            Confirmsubmit.IdCabin = Guid.Parse(IdCabinForDetails.ToString());
            Confirmsubmit.IdClass = Guid.Parse(IdClassForDetails.ToString());
            Confirmsubmit.IdLecturer = Guid.Parse(IdLecturerForDetails.ToString());
            Confirmsubmit.IdSubject = Guid.Parse(IdSubjectForDetails.ToString());
            Confirmsubmit.ShiftName = ShiftNameForDetails;
            Confirmsubmit.show();
        }
        else
        {
            _toastService.ShowError($"Đã quá thời gian xếp/hủy cabin");
        }
    }

    public async Task OnConfirmationSubmit(string deleteconfirmed)
    {
        hiddenCabin = true;
        if (deleteconfirmed != null)
        {
            await BookCabin();
        }
    }
    public async Task BookCabin()
    {
        hiddenCabin = true;
        var listBookingCabin = await _bookingCabinApiClient.GetAll();

        var StartShift = StartShiftForDetails;
        var EndShift = EndShiftForDetails;

        var objForCreate = listBookingCabin.FirstOrDefault(c => c.SubjectId == IdSubjectForDetails && c.ClassId == IdClassForDetails && c.IdShift == IdShiftForDetails && c.IdLectuter == IdLecturerForDetails && c.IdCabin == IdCabinForDetails && c.DateCreated == new DateTime(TeachingDayForDetails.Value.Year, TeachingDayForDetails.Value.Month, TeachingDayForDetails.Value.Day));
        var resBooking = false;
        var resRequest = false;

        // Tạo bookingcabin
        if (objForCreate == null)
        {
            var obj = new BookingCabinCreateVM()
                {
                    Id = Guid.NewGuid(),
                    SubjectId = Guid.Parse(IdSubjectForDetails.ToString()),
                    ClassId = Guid.Parse(IdClassForDetails.ToString()),
                    IdCabin = Guid.Parse(IdCabinForDetails.ToString()),
                    IdShift = Guid.Parse(IdShiftForDetails.ToString()),
                    IdLectuter = Guid.Parse(IdLecturerForDetails.ToString()),
                    //CheckinImage = bookingCabinVM.CheckinImage,
                    CheckinTime = new DateTime(TeachingDayForDetails.Value.Year, TeachingDayForDetails.Value.Month, TeachingDayForDetails.Value.Day, StartShift.Value.Hours, StartShift.Value.Minutes, StartShift.Value.Seconds),
                    CheckoutTime = new DateTime(TeachingDayForDetails.Value.Year, TeachingDayForDetails.Value.Month, TeachingDayForDetails.Value.Day, EndShift.Value.Hours, EndShift.Value.Minutes, EndShift.Value.Seconds),
                    //Note = bookingCabinVM.Note,
                    DateCreated = new DateTime(TeachingDayForDetails.Value.Year, TeachingDayForDetails.Value.Month, TeachingDayForDetails.Value.Day),
                    Status = 0
                };
            resBooking = await _bookingCabinApiClient.Add(obj);
        }
        else
        {
            resBooking = await _bookingCabinApiClient.Update(objForCreate.Id, Guid.Parse(IdCabinForDetails.ToString()), Guid.Parse(IdSubjectForDetails.ToString()), Guid.Parse(IdClassForDetails.ToString()), Guid.Parse(IdShiftForDetails.ToString()),
            new BookingCabinUpdateVM()
                {
                    Id = objForCreate.Id,
                    SubjectId = objForCreate.SubjectId,
                    ClassId = objForCreate.ClassId,
                    IdCabin = objForCreate.IdCabin,
                    IdShift = objForCreate.IdShift,
                    IdLectuter = objForCreate.IdLectuter,
                    CheckinImage = null,
                    CheckinTime = objForCreate.CheckinTime,
                    CheckoutTime = objForCreate.CheckoutTime,
                    Note = objForCreate.Note,
                    IndexOfBookingCabin = objForCreate.IndexOfBookingCabin,
                    DateCreated = objForCreate.DateCreated,
                    Status = 0
                });
        }

        // tạo booking request
        if (resBooking)
        {
            var StartTimeOfBR = new DateTime(TeachingDayForDetails.Value.Year, TeachingDayForDetails.Value.Month, TeachingDayForDetails.Value.Day, StartShift.Value.Hours, StartShift.Value.Minutes, StartShift.Value.Seconds);
            var EndTimeOfBR = new DateTime(TeachingDayForDetails.Value.Year, TeachingDayForDetails.Value.Month, TeachingDayForDetails.Value.Day, EndShift.Value.Hours, EndShift.Value.Minutes, EndShift.Value.Seconds);

            var booking = new BookingRequestCreateViewModel
                {
                    ContentOfRequest = "Đã được chọn giúp cabin",
                    IdLectuter = Guid.Parse(IdLecturerForDetails.ToString()),
                    SendingTime = DateTime.Now,
                    SubjectId = Guid.Parse(IdSubjectForDetails.ToString()),
                    ClassId = Guid.Parse(IdClassForDetails.ToString()),
                    Status = 4,
                    ContenOfFeedBack = "Đã được chọn giúp cabin",
                    StartTime = StartTimeOfBR,
                    FeedBackTime = DateTime.Now,
                    EndTime = EndTimeOfBR
                };

            // check BookingRequest.Status=0 của giảng viên bên BookingRequestPage
            // tồn tại ? tạo BookingRequest có status = 2 : status = 4
            var listBookingRequest = await _bookingRequestRepo.GetAllBookingRequestAsync();

            if (listBookingRequest.Any(c => c.IdLectuter == Guid.Parse(IdLecturerForDetails.ToString()) &&
            c.SubjectId == Guid.Parse(IdSubjectForDetails.ToString()) &&
            c.ClassId == Guid.Parse(IdClassForDetails.ToString()) &&
            c.StartTime == StartTimeOfBR &&
            c.EndTime == EndTimeOfBR
            ))
            {
                booking.Status = 2;
            }

            resRequest = await _bookingRequestRepo.CreateBookingRequest(booking);
        }

        if (resBooking && resRequest)
        {
            await Swal.FireAsync("Xếp Cabin", "Xếp Cabin Cho Lớp Học Thành Công", SweetAlertIcon.Success);
        }
        else
        {
            await Swal.FireAsync("Xếp Cabin", "Xếp Cabin Cho Lớp Học Thất Bại", SweetAlertIcon.Error);
        }
        await ResetValue();
        await GetTaskAsync(IdLecturer);
        await GetTasks();
    }

    public async Task OnConfirmationClose(string deleteconfirmed)//xác nhận thoát tab chụp ảnh
    {
        hiddenCabin = true;
        if (deleteconfirmed != null)
        {
            _contenFeedBack = deleteconfirmed;
            await CancelCabin();
        }
    }
    public async Task CancelCabin()
    {
        hiddenCabin = true;

        _contenFeedBack = _contenFeedBack == null ? "" : _contenFeedBack;
        if (_contenFeedBack.Trim().Length == 0)
        {
            _toastService.ShowError($"Không được để trống lí do hủy cabin");
        }
        else
        {
            var StartShift = StartShiftForDetails;
            var EndShift = EndShiftForDetails;

            // Xóa bookingcabin
            var listBookingCabin = await _bookingCabinApiClient.GetAll();

            var obj = listBookingCabin.FirstOrDefault(c => c.Status != 1 && c.SubjectId == IdSubjectForDetails && c.ClassId == IdClassForDetails && c.IdShift == IdShiftForDetails && c.IdLectuter == IdLecturerForDetails && c.IdCabin == IdCabinForDetails && c.DateCreated == new DateTime(TeachingDayForDetails.Value.Year, TeachingDayForDetails.Value.Month, TeachingDayForDetails.Value.Day));
            var resBooking = obj == null ? true : await _bookingCabinApiClient.Delete(obj.Id, Guid.Parse(IdCabinForDetails.ToString()), Guid.Parse(IdSubjectForDetails.ToString()), Guid.Parse(IdClassForDetails.ToString()), Guid.Parse(IdShiftForDetails.ToString()));
            var resRequest = false;

            // tạo booking request
            if (resBooking)
            {
                var StartTimeOfBR = new DateTime(TeachingDayForDetails.Value.Year, TeachingDayForDetails.Value.Month, TeachingDayForDetails.Value.Day, StartShiftForDetails.Value.Hours, StartShiftForDetails.Value.Minutes, StartShiftForDetails.Value.Seconds);
                var EndTimeOfBR = new DateTime(TeachingDayForDetails.Value.Year, TeachingDayForDetails.Value.Month, TeachingDayForDetails.Value.Day, EndShiftForDetails.Value.Hours, EndShiftForDetails.Value.Minutes, EndShiftForDetails.Value.Seconds);

                var booking = new BookingRequestCreateViewModel
                    {
                        ContentOfRequest = "Đã bị hủy cabin",
                        IdLectuter = Guid.Parse(IdLecturerForDetails.ToString()),
                        SendingTime = DateTime.Now,
                        SubjectId = Guid.Parse(IdSubjectForDetails.ToString()),
                        ClassId = Guid.Parse(IdClassForDetails.ToString()),
                        Status = 5,
                        ContenOfFeedBack = "Hủy cabin vì: " + _contenFeedBack,
                        StartTime = StartTimeOfBR,
                        FeedBackTime = DateTime.Now,
                        EndTime = EndTimeOfBR
                    };

                var listBookingRequest = await _bookingRequestRepo.GetAllBookingRequestAsync();

                if (listBookingRequest.Any(c => c.IdLectuter == Guid.Parse(IdLecturerForDetails.ToString()) &&
                    c.SubjectId == Guid.Parse(IdSubjectForDetails.ToString()) &&
                c.ClassId == Guid.Parse(IdClassForDetails.ToString()) &&
                c.StartTime == StartTimeOfBR &&
                c.EndTime == EndTimeOfBR
                ))
                {
                    booking.Status = 3;
                }
                resRequest = await _bookingRequestRepo.CreateBookingRequest(booking);
            }

            if (resBooking && resRequest)
            {
                await Swal.FireAsync("Hủy Cabin", "Hủy Cabin Cho Lớp Học Thành Công", SweetAlertIcon.Success);
            }
            else
            {
                await Swal.FireAsync("Hủy Cabin", "Hủy Cabin Cho Lớp Học Thất Bại", SweetAlertIcon.Error);
            }
        }
        await ResetValue();
        await GetTaskAsync(IdLecturer);
        await GetTasks();
    }

    private async Task ResetValue()
    {
        IdClassForDetails = Guid.Empty;
        IdSubjectForDetails = Guid.Empty;
        IdLecturerForDetails = Guid.Empty;
        IdShiftForDetails = Guid.Empty;
        IdCabinForDetails = Guid.Empty;
        ClassSubjectNameForDetails = null;
        LecturerNameForDetails = null;
        ShiftNameForDetails = null;
        CabinNameForDetails = null;
        TeachingDayForDetails = null;
        StartShiftForDetails = null;
        EndShiftForDetails = null;

        FullStartTime = DateTime.Now;
        FullEndTime = DateTime.Now;

        hiddenCabin = true;
    }

    #region Load DaysOfWeek
    public void LoadDaysOfWeek(DateTime date)
    {
        date = new DateTime(date.Year, date.Month, date.Day);
        daysOfWeek = new List<(string, DateTime)>();

        var dayOfWeek = date.DayOfWeek;
        DateTime monday = new DateTime();
        if (dayOfWeek == DayOfWeek.Sunday)
        {
            //xét chủ nhật là đầu tuần
            //return date.AddDays(1);

            //xét chủ nhật là ngày cuối tuần
            monday = date.AddDays(-6);
        }
        else
        {
            int offset = dayOfWeek - DayOfWeek.Monday;
            monday = date.AddDays(-offset);
        }
        daysOfWeek.Add(new("Thứ 2", monday));
        for (int i = 1; i < 7; i++)
        {
            if (i == 6)
            {
                daysOfWeek.Add(new($"Chủ Nhật", monday.AddDays(i)));
            }
            else
            {
                daysOfWeek.Add(new($"Thứ {i + 2}", monday.AddDays(i)));
            }
        }
    }
    #endregion

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JSRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private SweetAlertService Swal { get; set; }
    }
}
namespace __Blazor.FPLSP.Pages.CabinProject.DaoTao.ViewAllTeachingSchedule
{
    #line hidden
    internal static class TypeInference
    {
        public static void CreateInputSelect_0<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Object __arg0, int __seq1, global::System.Object __arg1, int __seq2, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg2, int __seq3, TValue __arg3, int __seq4, global::Microsoft.AspNetCore.Components.EventCallback<TValue> __arg4, int __seq5, global::Microsoft.AspNetCore.Components.RenderFragment __arg5)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.InputSelect<TValue>>(seq);
        __builder.AddAttribute(__seq0, "id", __arg0);
        __builder.AddAttribute(__seq1, "class", __arg1);
        __builder.AddAttribute(__seq2, "ValueExpression", __arg2);
        __builder.AddAttribute(__seq3, "Value", __arg3);
        __builder.AddAttribute(__seq4, "ValueChanged", __arg4);
        __builder.AddAttribute(__seq5, "ChildContent", __arg5);
        __builder.CloseComponent();
        }
    }
}
#pragma warning restore 1591
