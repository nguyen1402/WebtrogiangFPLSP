#pragma checksum "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "8cb067dcbccecd639c2a05bba19135aef5897f39"
// <auto-generated/>
#pragma warning disable 1591
namespace FPLSP.Pages.GiaoVienLop
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using FPLSP;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using FPLSP.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using MudBlazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using FPLSP.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Blazored.Typeahead;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using CurrieTechnologies.Razor.SweetAlert2;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using Blazored.Toast.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Components.StudentCPComponents;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Data.Securities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Repositories.Interfaces;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Server.Data.SeedWork;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Server.Domain.Dtos;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Server.Domain.Dtos.StudentUPDtos;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Server.Domain.Entities.UserParts;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Server.Infrastructure.Services.Interfaces;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Server.Infrastructure.ViewModels.GiaoVienTaoLop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Server.Infrastructure.ViewModels.StudentClassUPVm;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Server.Infrastructure.ViewModels.StudentQuizUPVm;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Server.Infrastructure.ViewModels.StudentsUPVm;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Server.Infrastructure.ViewModels.Subject;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
using FPLSP.Server.Infrastructure.ViewModels.SubmitHomeWorkVM;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
           [Authorize(Roles = "LecturerFPLSP")]

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Components.RouteAttribute("/AddStudentInClass/{idClassNonDecrypt}/{specializedIdNonDecrypt}/{lecuIdNonDecrypt}/{subjectIdNonDecrypt}")]
    public partial class AddStudentInClass : global::Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "nav");
            __builder.AddAttribute(1, "aria-label", "breadcrumb");
            __builder.OpenElement(2, "ol");
            __builder.AddAttribute(3, "class", "breadcrumb");
            __builder.OpenElement(4, "li");
            __builder.AddAttribute(5, "class", "breadcrumb-item");
            __builder.AddMarkupContent(6, "Chuyên ngành: ");
            __builder.OpenElement(7, "a");
            __builder.AddAttribute(8, "style", "color:blue;box-shadow: 0 1px");
            __builder.AddAttribute(9, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 23 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                                                                    () => ResToSpec()

#line default
#line hidden
#nullable disable
            ));
#nullable restore
#line (23,121)-(23,224) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
__builder.AddContent(10, lstSpecAll.Where(c=>c.Id == Guid.Parse(specializedId)).Select(c=>c.SpecializationName).FirstOrDefault());

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(11, "\r\n        ");
            __builder.OpenElement(12, "li");
            __builder.AddAttribute(13, "class", "breadcrumb-item");
            __builder.AddMarkupContent(14, "Môn: ");
            __builder.OpenElement(15, "a");
            __builder.AddAttribute(16, "style", "color:blue;box-shadow: 0 1px");
            __builder.AddAttribute(17, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 24 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                                                           () => Mon()

#line default
#line hidden
#nullable disable
            ));
#nullable restore
#line (24,106)-(24,201) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
__builder.AddContent(18, SubjectUPList.Where(c=>c.Id == Guid.Parse(subjectId)).Select(c=>c.SubjectName).FirstOrDefault());

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(19, "\r\n        ");
            __builder.OpenElement(20, "li");
            __builder.AddAttribute(21, "class", "breadcrumb-item");
            __builder.AddMarkupContent(22, "Lớp: ");
            __builder.OpenElement(23, "a");
            __builder.AddAttribute(24, "style", "color:blue;box-shadow: 0 1px");
            __builder.AddAttribute(25, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                                                           () => RedirectToDetails()

#line default
#line hidden
#nullable disable
            ));
#nullable restore
#line (25,120)-(25,214) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
__builder.AddContent(26, _lstClassUps.Where(c=>c.Id == Guid.Parse(idClass)).Select(c=>c.ClassroomName).FirstOrDefault());

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(27, "\r\n        ");
            __builder.AddMarkupContent(28, "<li class=\"breadcrumb-item active\" aria-current=\"page\">Thêm sinh viên vào lớp</li>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(29, "\r\n");
            __builder.OpenElement(30, "div");
            __builder.AddAttribute(31, "class", "row");
            __builder.OpenElement(32, "div");
            __builder.AddAttribute(33, "class", "col-2 d-flex");
            __builder.OpenElement(34, "div");
            __builder.AddAttribute(35, "class", "p-2");
            __builder.OpenElement(36, "a");
            __builder.AddAttribute(37, "class", "btn btn-outline-danger");
            __builder.AddAttribute(38, "title", "Quay lại");
            __builder.AddAttribute(39, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 32 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                                         () => RedirectToDetails()

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(40, "<i class=\"bi bi-arrow-return-left\"></i>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(41, "\r\n    ");
            __builder.OpenElement(42, "div");
            __builder.AddAttribute(43, "class", "col-6 d-flex ");
            __builder.OpenElement(44, "div");
            __builder.AddAttribute(45, "class", "p-2");
            __builder.AddAttribute(46, "stype", "text-aline:center");
            __builder.OpenComponent<global::FPLSP.Pages.StudentUPPages.StudentUPSearch>(47);
            __builder.AddAttribute(48, "OnSearch", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::FPLSP.Server.Infrastructure.ViewModels.StudentsUPVm.StudentUPListSearchVm>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::FPLSP.Server.Infrastructure.ViewModels.StudentsUPVm.StudentUPListSearchVm>(this, 
#nullable restore
#line 37 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                                  SearchStudentUP

#line default
#line hidden
#nullable disable
            )));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(49, "\r\n    ");
            __builder.OpenElement(50, "div");
            __builder.AddAttribute(51, "class", "col-4 d-flex flex-row-reverse");
            __builder.OpenElement(52, "div");
            __builder.AddAttribute(53, "class", "p-2");
#nullable restore
#line 43 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
             if (@_lststudentUpDtosALL.Where(c => c.IsChecked == true).ToList().Count() > 0 || _lststudentUpDtosExcel.Count() > 0)
            {

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.EditForm>(54);
            __builder.AddAttribute(55, "Model", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Object>(
#nullable restore
#line 45 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                  _lstStudentUpDtosShow

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(56, "ChildContent", (global::Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                __builder2.OpenElement(57, "div");
                __builder2.AddAttribute(58, "class", "d-flex justify-content-center");
                __builder2.OpenElement(59, "div");
                __builder2.AddAttribute(60, "class", "d-flex gap-3 mx-auto");
                __builder2.OpenElement(61, "button");
                __builder2.AddAttribute(62, "class", "btn btn-info");
                __builder2.AddAttribute(63, "title", "Thêm Sinh Viên Vào Lớp");
                __builder2.AddAttribute(64, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 48 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                                                                  () => Creates()

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddMarkupContent(65, "Thêm");
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.CloseElement();
            }
            ));
            __builder.CloseComponent();
#nullable restore
#line 52 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(66, "\r\n\r\n\r\n        ");
            __builder.OpenElement(67, "div");
            __builder.AddAttribute(68, "class", "p-2");
            __builder.OpenElement(69, "a");
            __builder.AddAttribute(70, "class", "btn btn-outline-primary");
            __builder.AddAttribute(71, "title", "Thêm sinh viên bằng email");
            __builder.AddAttribute(72, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 57 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                                                           ()=>OnText(testAre)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(73, "Thêm bằng Email");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(74, "\r\n\r\n\r\n");
            __builder.OpenElement(75, "div");
            __builder.AddAttribute(76, "class", "row");
#nullable restore
#line 65 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
     if (_lststudentUpDtosALL.Count() > 0)
    {


#line default
#line hidden
#nullable disable
            __builder.OpenElement(77, "table");
            __builder.AddAttribute(78, "class", "table table-hover align-middle table-bordered mt-3");
            __builder.AddAttribute(79, "style", "text-align:center");
            __builder.OpenElement(80, "thead");
            __builder.AddAttribute(81, "class", "table-success");
            __builder.OpenElement(82, "tr");
            __builder.OpenElement(83, "th");
            __builder.OpenElement(84, "input");
            __builder.AddAttribute(85, "type", "checkbox");
            __builder.AddAttribute(86, "onchange", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#nullable restore
#line 71 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                                                               EventArgs => {CheckAllExpense( EventArgs.Value);} 

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(87, "checked", global::Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 71 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                       Check

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(88, "oninput", global::Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => Check = __value, Check));
            __builder.SetUpdatesAttributeName("checked");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(89, "\r\n                    ");
            __builder.AddMarkupContent(90, "<th stype=\"width:10%\">Ảnh</th>\r\n                    ");
            __builder.AddMarkupContent(91, "<th stype=\"width:15%\">Mã Sinh Viên</th>\r\n                    ");
            __builder.AddMarkupContent(92, "<th stype=\"width:20%\">Tên Sinh Viên</th>\r\n                    ");
            __builder.AddMarkupContent(93, "<th stype=\"width:20%\">Email</th>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(94, "\r\n            ");
            __builder.OpenElement(95, "tbody");
#nullable restore
#line 80 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                 foreach (var item in _lststudentUpDtosALL)
                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(96, "tr");
            __builder.OpenElement(97, "td");
            __builder.OpenElement(98, "input");
            __builder.AddAttribute(99, "type", "checkbox");
            __builder.AddAttribute(100, "checked", 
#nullable restore
#line 83 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                            item.IsChecked

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(101, "onchange", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#nullable restore
#line 83 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                                                      ()=>CheckManual(item.Id,item.IsChecked)

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(102, "\r\n                        ");
            __builder.OpenElement(103, "td");
            __builder.OpenElement(104, "img");
            __builder.AddAttribute(105, "src", 
#nullable restore
#line 84 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                       item.ImageUrl

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(106, "onerror", "this.src=\'./css/images/Others/logoFPT.png\'");
            __builder.AddAttribute(107, "alt", 
#nullable restore
#line 84 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                                                                                 item.ImageUrl

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(108, "height", "100px");
            __builder.AddAttribute(109, "width", "100px");
            __builder.AddAttribute(110, "style", "object-fit:contain");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(111, "\r\n                        ");
            __builder.OpenElement(112, "td");
#nullable restore
#line (85,30)-(85,46) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
__builder.AddContent(113, item.StudentCode);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(114, "\r\n                        ");
            __builder.OpenElement(115, "td");
#nullable restore
#line (86,30)-(86,46) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
__builder.AddContent(116, item.StudentName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(117, "\r\n                        ");
            __builder.OpenElement(118, "td");
#nullable restore
#line (87,30)-(87,40) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
__builder.AddContent(119, item.Email);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 91 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 94 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
    }
    else
    {
        

#line default
#line hidden
#nullable disable
#nullable restore
#line 97 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
         if (encounter != 14)
        {

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<global::FPLSP.Components.LoadingIndicator>(120);
            __builder.CloseComponent();
#nullable restore
#line 100 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
        }
        else
        {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(121, "<h5>Danh sách sinh viên trống</h5>");
#nullable restore
#line 104 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 104 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
         
    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(122, "\r\n");
            __builder.OpenElement(123, "div");
            __builder.AddAttribute(124, "class", "footer text-muted");
            __builder.OpenElement(125, "div");
            __builder.AddAttribute(126, "class", "row mt-3");
            __builder.OpenComponent<global::FPLSP.Components.Pagingation>(127);
            __builder.AddAttribute(128, "MetaData", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::FPLSP.Server.Data.SeedWork.MetaData>(
#nullable restore
#line 110 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                               MetaData

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(129, "Spread", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Int32>(
#nullable restore
#line 110 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                 2

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(130, "SelectedPage", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::System.Int32>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::System.Int32>(this, 
#nullable restore
#line 110 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                                                  SelectedPage

#line default
#line hidden
#nullable disable
            )));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(131, "\r\n");
            __builder.OpenComponent<global::FPLSP.Components.PopUpConfirm>(132);
            __builder.AddAttribute(133, "ConfirmationMessage", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.String>(
#nullable restore
#line 113 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                    ConfirmationTitle

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(134, "ConfirmationTitle", "Xác nhận của bạn ?");
            __builder.AddAttribute(135, "ConfirmationChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::System.Boolean>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::System.Boolean>(this, 
#nullable restore
#line 116 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                   OnConfirmationDelete

#line default
#line hidden
#nullable disable
            )));
            __builder.AddComponentReferenceCapture(136, (__value) => {
#nullable restore
#line 115 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                    DeleConfirmation = (FPLSP.Components.PopUpConfirm)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.AddMarkupContent(137, "\r\n");
            __builder.OpenComponent<global::FPLSP.Pages.GiaoVienLop.AddsutdentInClassTextAre>(138);
            __builder.AddAttribute(139, "ConfirmationMessage", "Xác nhận thêm");
            __builder.AddAttribute(140, "ConfirmationTitle", "Danh sách email sinh viên");
            __builder.AddAttribute(141, "Confirmation", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::System.String>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::System.String>(this, 
#nullable restore
#line 122 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                        pushTextAre

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(142, "ConfirmationChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::System.Boolean>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::System.Boolean>(this, 
#nullable restore
#line 123 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                               OnConfirmationUpdate

#line default
#line hidden
#nullable disable
            )));
            __builder.AddComponentReferenceCapture(143, (__value) => {
#nullable restore
#line 121 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
                                addsutdentInClassText = (FPLSP.Pages.GiaoVienLop.AddsutdentInClassTextAre)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
        }
        #pragma warning restore 1998
#nullable restore
#line 126 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\GiaoVienLop\AddStudentInClass.razor"
       

    protected PopUpConfirm DeleConfirmation { set; get; }
    public async Task OnConfirmationDelete(bool deleteconfirmed)
    {
        if (deleteconfirmed)
        {
            await Create();
        }
    }
    private async Task Creates()
    {
        ConfirmationTitle = $"Bạn có chắc muốn thêm sinh viên vào lớp học";
        DeleConfirmation.show();
    }
    [Parameter]
    public string ConfirmationTitle { get; set; }
    [Parameter]
    public string idClassNonDecrypt { get; set; }
    [Parameter]
    public string specializedIdNonDecrypt { get; set; }
    [Parameter]
    public string lecuIdNonDecrypt { get; set; }
    [Parameter]
    public string subjectIdNonDecrypt { get; set; }


    public string idClass = "";

    public string specializedId ="";

    public string lecuId ="";

    public string subjectId= "";

    [Parameter]
    public string Error { get; set; }

    AddsutdentInClassTextAre addsutdentInClassText { get; set; }
    [Inject]
    public IStudentUPRepo _studentUPRepo { get; set; }


    //private readonly IHttpContextAccessor _httpContextAccessor;
    //private readonly IHostingEnvironment _hostingEnvironment;
    //private readonly IMapper _mapper;

    //private List<ExcelErrors> _listexcelErrors = new List<ExcelErrors>();

    //private string Partern = "^[a-z]{3,13}[0-9]{5}@fpt.edu.vn";

    [Inject]
    public IStudentClassUPRepo _reportStudentClassUPRepo { get; set; }
    [Inject]
    public IStudentQuizUPRepo _studentQuizUPRepo { get; set; }
    [Inject]
    public ICopySubjectInClassRepo ICopySubjectInClassRepo { get; set; }

    [Inject]
    public NavigationManager Navigation { get; set; }
    [Inject]
    public IClassSubjectApiClient _iClassSubjectApiClient { get; set; }

    [Inject]
    public ISubmitHomeWorkApiClient _SubmitHomeWorkApiClient { get; set; }

    [Inject]
    public ISubmitHomeworkForStudentRepo _submitHomeworkForStudentRepo { get; set; }
    [Inject]
    public ILecturersCPRepo _lecturersCPRepo { get; set; }
    [Inject] private IToastService _toastService { get; set; }

    private SubjectClassVM subjectClassVM { get; set; } = new SubjectClassVM();
    private int encounter;
    public List<StudentUpDto> _lststudentUpDtosExcel { get; set; } = new List<StudentUpDto>();
    public List<StudentUpDto> _lststudentUpDtosALL { get; set; } = new List<StudentUpDto>();

    public List<StudentUpDto> _liststudentClassJoin { get; set; } = new List<StudentUpDto>();
    public List<StudentClassUP> _lstStudentClassUPDtos { get; set; } = new List<StudentClassUP>();
    //public List<SubjectClassUP> _lstsubjectClassUPs { get; set; } = new List<SubjectClassUP>();
    public List<ClassUp> _lstClassUps { get; set; } = new List<ClassUp>();
    public List<StudentUpDto> _lstStudentUpDtosExist { get; set; } = new List<StudentUpDto>();
    public List<StudentUpDto> _lstStudentUpDtosShow { get; set; } = new List<StudentUpDto>();
    public List<SubjectClassUP> _lstSubjectClassUPsAll { get; set; } = new List<SubjectClassUP>();
    public List<Guid?> lstGuidIdStudent { get; set; } = new List<Guid?>();

    public List<StudentUpDto> _lstStudentUpCheck { get; set; } = new List<StudentUpDto>();

    private List<ExcelErrors> _lstErrr = new List<ExcelErrors>();
    private bool IsDisabled = false;
    private bool Check = false;
    IBrowserFile selectedFiles;
    public ListIdQuiz _listIdQuizzes = new ListIdQuiz();
    private StudentUPListSearchVm studentUPListSearchVm = new StudentUPListSearchVm();
    private StudentClassUPCreateVm _studentClassUPCreateVm = new StudentClassUPCreateVm();
    private StudentQuizCreateUPVM _studentQuizCreateUPVM = new StudentQuizCreateUPVM();
    private SubmitHomeWorkCreateVM createSubmit = new SubmitHomeWorkCreateVM();

    private string JoinCodeSubjectClass = string.Empty;
    private Random random = new Random();

    //public AddStudentInClass(IHttpContextAccessor httpContextAccessor, IHostingEnvironment hostingEnvironment, IMapper mapper)
    //{
    //    _httpContextAccessor = httpContextAccessor;
    //    _hostingEnvironment = hostingEnvironment;
    //    _mapper = mapper;
    //}

    public bool ShowAuthError { get; set; }
    public string testAre { get; set; }

    public MetaData MetaData { get; set; } = new MetaData();

    public List<SpecializedDto> lstSpecAll { get; set; } = new List<SpecializedDto>();
    [Inject]
    public ISpecializedCPRepo _iSpecializedClient { get; set; }

    [Inject] public ISubjectUPRepo _subjectUPRepo { get; set; }
    public List<SubjectDto> SubjectUPList { get; set; } = new List<SubjectDto>();

    private SubjectListSearch SubjectListSearch = new SubjectListSearch();
    [Inject]
    public CryptoServices _cryptoServices { get; set; }


    private async Task OnConfirmationUpdate(bool submitConfirmed)
    {
        if (submitConfirmed)
        {
            _lststudentUpDtosExcel.Clear();
            var LectureById = await _lecturersCPRepo.GetLecturerListById(Guid.Parse(lecuId));
            var idTrain = LectureById.TrainingFacilitiesId.Value;
            _lststudentUpDtosExcel = await _reportStudentClassUPRepo.GetListSTTestAre(testAre,idTrain);
            _toastService.ShowSuccess($"Thêm danh sách tạm thành công {_lststudentUpDtosExcel.Count()} sinh viên");
        }
        else
        {
            _toastService.ShowError($"Thêm danh sách thất bại");
        }

        await OnInitializedAsync();
    }
    private async Task pushTextAre(string text)
    {
        testAre = text;
    }

    protected async override Task OnInitializedAsync()
    {
        lecuId = _cryptoServices.Decrypt(lecuIdNonDecrypt.Replace("I0H", "/"));
        subjectId = _cryptoServices.Decrypt(subjectIdNonDecrypt.Replace("I0H", "/"));
        specializedId = _cryptoServices.Decrypt(specializedIdNonDecrypt.Replace("I0H", "/"));
        idClass = _cryptoServices.Decrypt(idClassNonDecrypt.Replace("I0H", "/"));

        _lststudentUpDtosALL = new List<StudentUpDto>();
        studentUPListSearchVm = new StudentUPListSearchVm();
        _lstStudentUpDtosShow = new List<StudentUpDto>();

        _lstStudentUpCheck = await _studentUPRepo.GetAllStudentDtosAsync();

        await GetTasks();
    }

    private async void OnFileSelected(InputFileChangeEventArgs e)
    {
        _lststudentUpDtosExcel.Clear();
        selectedFiles = e.File;
        this.StateHasChanged();
    }
    private async Task OnText(string textAre1)
    {
        addsutdentInClassText.show();

        testAre = textAre1;
    }
    private async void Upload()
    {

    }
    private async Task GetTasks()
    {
        try
        {
            for (var i = 0; i < 15; i++)
            {
                encounter = i;
            }
            var SubjectUPListpagingResponse1 = await _subjectUPRepo.GetSubjects(Guid.Parse(specializedId), SubjectListSearch);
            SubjectUPList = SubjectUPListpagingResponse1.Items;
            lstSpecAll = await _iSpecializedClient.GetAll();

            _lstStudentClassUPDtos = await _reportStudentClassUPRepo.GetAllStudentUPAsync();
            //var pagingResponse = await _studentUPRepo.GetStudentUPList(studentUPListSearchVm);
            //_lststudentUpDtosALL = pagingResponse.Items;

            var items = await _studentUPRepo.GetAllStudentDtosAsync();



            _lstSubjectClassUPsAll = await _iClassSubjectApiClient.GetAllSubjectClass();

            _listIdQuizzes = await _iClassSubjectApiClient.GetListIDQuiz(Guid.Parse(subjectId));

            _lstClassUps = await _iClassSubjectApiClient.GetlstClassUP(Guid.Parse(subjectId));

            foreach (var ClassUP in _lstClassUps)
            {
                var lsjoicode = _lstSubjectClassUPsAll.Where(c => c.SubjectId == Guid.Parse(subjectId)).Select(c => c.JoinCode).ToList();
                var lstGuidIdStudent = _lstStudentClassUPDtos.Where(c => lsjoicode.Contains(c.JoinCodeAsign)).Select(c => c.StudentId).ToList();

                var Lststudents = items.Where(c => lstGuidIdStudent.Contains(c.Id)).ToList();


                foreach (var student in Lststudents)
                {
                    _lstStudentUpDtosExist.Add(student);
                }
            }

            _lststudentUpDtosALL = items;
            for (int i = 0; i < _lststudentUpDtosALL.Count(); i++)
            {
                foreach (var studentExist in _lstStudentUpDtosExist)
                {
                    if (_lststudentUpDtosALL.Any(c => c.Id == studentExist.Id))

                    {
                        _lststudentUpDtosALL.Remove(studentExist);
                    }

                }
            }
            foreach (var item in _lststudentUpDtosALL.Where(c => c.StudentName == null).ToList())
            {
                _lststudentUpDtosALL.Remove(item);
            }



            if (string.IsNullOrEmpty(studentUPListSearchVm.Status) == false)
            {
                _lststudentUpDtosALL = _lststudentUpDtosALL.Where(x => x.Status == Convert.ToInt32(studentUPListSearchVm.Status)).ToList();
            }
            if (studentUPListSearchVm.NameStudent != null)
            {
                _lststudentUpDtosALL = _lststudentUpDtosALL.Where(x => x.StudentName.ToLower().Contains(studentUPListSearchVm.NameStudent.ToLower()) || x.StudentCode.ToLower().Contains(studentUPListSearchVm.NameStudent.ToLower())).ToList();
            }

            var data = _lststudentUpDtosALL.Skip((studentUPListSearchVm.PageNumber - 1) * studentUPListSearchVm.PageSize).Take(studentUPListSearchVm.PageSize).ToList();
            var lstpage = new PageList<StudentUpDto>(data,
                _lststudentUpDtosALL.Count(),
                studentUPListSearchVm.PageNumber,
                studentUPListSearchVm.PageSize);
            _lststudentUpDtosALL = lstpage.Items;
            MetaData = lstpage.MetaData;
            if (_lstStudentUpCheck.Count() > 0)
            {
                foreach (var item in _lststudentUpDtosALL)
                {
                    if (_lstStudentUpCheck.Any(c => c.Id == item.Id))
                    {

                        var a = _lstStudentUpCheck.FirstOrDefault(c => c.Id == item.Id);
                        item.IsChecked = a.IsChecked;
                    }
                }
            }

        }
        catch (Exception ex)
        {
            Error = ex.Message;
        }
    }

    private async Task SelectedPage(int page)
    {
        foreach (var item in _lststudentUpDtosALL)
        {
            var a = _lstStudentUpCheck.FirstOrDefault(c => c.Id == item.Id);
            a.IsChecked = item.IsChecked;
        }
        studentUPListSearchVm.PageNumber = page;
        Check = false;
        await GetTasks();
    }
    private async Task Create()
    {
        try
        {
            foreach (var item in _lststudentUpDtosALL)
            {
                var a = _lstStudentUpCheck.FirstOrDefault(c => c.Id == item.Id);
                a.IsChecked = item.IsChecked;
            }
            int countDouble = 0;
            //_lststudentUpDtosExcel = await _reportStudentClassUPRepo.LoadingBigData(selectedFiles);

            //_lstErrr = await _reportStudentClassUPRepo.GetListErr();
            _lstSubjectClassUPsAll = await _iClassSubjectApiClient.GetAllSubjectClass();
            JoinCodeSubjectClass = _lstSubjectClassUPsAll.Where(c => c.ClassId == Guid.Parse(idClass) && c.SubjectId == Guid.Parse(subjectId)).Select(c => c.JoinCode).FirstOrDefault();

            var AllStudenInClass = await _reportStudentClassUPRepo.GetAllStudentUPAsync();

            var countStudentInClass = AllStudenInClass.Where(c => c.JoinCodeAsign == JoinCodeSubjectClass).ToList().Count();
            var subjecclassUPls = await _iClassSubjectApiClient.GetAllSubjectClass();
            var subjecclss = subjecclassUPls.Where(c => c.JoinCode == JoinCodeSubjectClass).FirstOrDefault();
            if (_lstStudentUpCheck.Where(c => c.IsChecked == true).ToList().Count() + countStudentInClass > subjecclss.StudentAmount)
            {
                _toastService.ShowError("Số lượng sinh viên hiện tại là:" + countStudentInClass + "Thêm " + _lstStudentUpCheck.Where(c => c.IsChecked == true).ToList().Count() + "sinh viên " + "đã vượt số lượng hạn mức là:" + subjecclss.StudentAmount);
                return;
            }
            if (_lststudentUpDtosExcel != null)
            {
                if (_lstStudentUpCheck.Where(c => c.IsChecked == true).ToList().Count() + _lststudentUpDtosExcel.Count() + countStudentInClass > subjecclss.StudentAmount)
                {
                    _toastService.ShowError("Số lượng sinh viên hiện tại là:" + countStudentInClass + "Thêm " + _lstStudentUpCheck.Where(c => c.IsChecked == true).ToList().Count() + "sinh viên và bằng excel" + _lststudentUpDtosExcel.Count() + "đã vượt số lượng hạn mức là:" + subjecclss.StudentAmount);
                    return;
                }
            }
            try
            {
                if (_lstStudentUpCheck.Where(c => c.IsChecked == true).ToList().Count() > 0)
                {
                    foreach (var x in _lstStudentUpCheck.Where(c => c.IsChecked == true).ToList())
                    {
                        _lstStudentClassUPDtos = await _reportStudentClassUPRepo.GetAllStudentUPAsync();
                        if (_lstStudentClassUPDtos.Any(c => c.JoinCodeAsign == JoinCodeSubjectClass && c.StudentId == x.Id))

                        {
                            countDouble++;
                            continue;
                        }

                        _studentClassUPCreateVm = new StudentClassUPCreateVm()
                            {
                                ClassId = Guid.Parse(idClass),
                                JoinCodeAsign = JoinCodeSubjectClass,
                                StatusOfStudent = 1,
                                Status = 0,
                                StudentId = x.Id
                            };
                        _reportStudentClassUPRepo.CreateStudentClassUP(_studentClassUPCreateVm);
                        //foreach (var item in _listIdQuizzes.idquiz)
                        //{
                        //    _studentQuizCreateUPVM = new StudentQuizCreateUPVM()
                        //        {
                        //            CounterTurn = 0,
                        //            QuizId = item,
                        //            StudentId = x.Id,
                        //            ScoreQuizOfStudent = 0,
                        //            Status = 0
                        //        };
                        //    _studentQuizUPRepo.Create(_studentQuizCreateUPVM);
                        //}
                        lstGuidIdStudent.Add(x.Id);

                    }
                }
            }
            catch
            {

                _toastService.ShowError("Thêm thất bại");
            }


            try
            {

                if (_lststudentUpDtosExcel != null)
                {
                    foreach (var x in _lststudentUpDtosExcel)
                    {
                        foreach (var studentUpDtosALL in _lstStudentUpCheck.Where(c => c.IsChecked == true).ToList())
                        {
                            if (x.Email == studentUpDtosALL.Email)
                            {
                                countDouble++;
                                continue;
                            }
                        }
                        _lstStudentClassUPDtos = await _reportStudentClassUPRepo.GetAllStudentUPAsync();
                        if (_lstStudentClassUPDtos.Any(c => c.JoinCodeAsign == JoinCodeSubjectClass && c.StudentId == x.Id))
                        {
                            continue;
                        }

                        if (countStudentInClass >= subjecclss.StudentAmount)
                        {
                            continue;
                        }
                        _studentClassUPCreateVm = new StudentClassUPCreateVm()
                            {
                                ClassId = Guid.Parse(idClass),
                                JoinCodeAsign = JoinCodeSubjectClass,
                                StatusOfStudent = 1,
                                Status = 0,
                                StudentId = x.Id
                            };
                        _reportStudentClassUPRepo.CreateStudentClassUP(_studentClassUPCreateVm);
                        //foreach (var item in _listIdQuizzes.idquiz)
                        //{
                        //    _studentQuizCreateUPVM = new StudentQuizCreateUPVM()
                        //        {
                        //            CounterTurn = 0,
                        //            QuizId = item,
                        //            StudentId = x.Id,
                        //            ScoreQuizOfStudent = 0,
                        //            Status = 0
                        //        };
                        //    _studentQuizUPRepo.Create(_studentQuizCreateUPVM);
                        //}
                        lstGuidIdStudent.Add(x.Id);
                    }
                }
            }
            catch
            {

                _toastService.ShowError("Thêm Excel thất bại");

            }

            try
            {
                if (lstGuidIdStudent.Count() > 0)
                {
                    var AllSubMit = await _submitHomeworkForStudentRepo.Student_GetAllAsync();
                    var SubmitIdLesson = AllSubMit.Where(c => c.IdSubject == Guid.Parse(subjectId) && c.IdClass == Guid.Parse(idClass)).ToList();

                    var GroupIDLesson = SubmitIdLesson.GroupBy(g => g.Titile).Select(c => new SubmitHomeWork()
                        {
                            Id = c.Where(w => w.Titile == c.Key).Select(c => c.Id).FirstOrDefault(),
                            IdClass = c.Where(w => w.Titile == c.Key).Select(c => c.IdClass).FirstOrDefault(),
                            IdLesson = c.Where(w => w.Titile == c.Key).Select(c => c.IdLesson).FirstOrDefault(),
                            IdStudent = c.Where(w => w.Titile == c.Key).Select(c => c.IdStudent).FirstOrDefault(),
                            IdSubject = c.Where(w => w.Titile == c.Key).Select(c => c.IdSubject).FirstOrDefault(),
                            EndTime = c.Where(w => w.Titile == c.Key).Select(c => c.EndTime).FirstOrDefault(),
                            Status = c.Where(w => w.Titile == c.Key).Select(c => c.Status).FirstOrDefault(),
                            Titile = c.Where(w => w.Titile == c.Key).Select(c => c.Titile).FirstOrDefault(),
                            StartedDate = c.Where(w => w.Titile == c.Key).Select(c => c.StartedDate).FirstOrDefault(),
                            SubmitLink = c.Where(w => w.Titile == c.Key).Select(c => c.SubmitLink).FirstOrDefault(),
                            SubmitTime = c.Where(w => w.Titile == c.Key).Select(c => c.SubmitTime).FirstOrDefault(),
                        }).ToList();
                    foreach (var item in GroupIDLesson)
                    {
                        createSubmit = new SubmitHomeWorkCreateVM()
                            {
                                EndTime = item.EndTime,
                                IdLesson = item.IdLesson,
                                IdSubject = item.IdSubject,
                                LsIdStudent = lstGuidIdStudent,
                                StartedDate = item.StartedDate,
                                SubmitTime = null,
                                IdClass = item.IdClass,
                                Titile = item.Titile
                            };
                        if (AllSubMit.Any(c => c.IdClass == createSubmit.IdClass && c.IdLesson == createSubmit.IdLesson && c.IdSubject == createSubmit.IdSubject && lstGuidIdStudent.Any(a => a == c.IdStudent)))
                        {
                            continue;
                        }
                        else
                        {
                            await _SubmitHomeWorkApiClient.Add(createSubmit);
                        }
                    }
                }
            }
            catch
            {

                _toastService.ShowError("Thêm bài tập thất bại");
            }
            int count = _lstStudentUpCheck.Where(c => c.IsChecked == true).ToList().Count() - countDouble;
            if (_lststudentUpDtosExcel.Count() > 0)
            {
                count += _lststudentUpDtosExcel.Count();
            }
            _toastService.ShowSuccess($"Thêm thành công {count} và {countDouble} sinh viên trùng");

            var url = Path.Combine($"/ViewChiTitet/{idClassNonDecrypt}/{specializedIdNonDecrypt}/{lecuIdNonDecrypt}/{subjectIdNonDecrypt}");
            Navigation.NavigateTo(url);
        }
        catch
        {

            _toastService.ShowError("Thêm thất bại");
        }
    }

    private async Task RetoSubject()
    {
        var url = Path.Combine($"/Giaovien/{specializedIdNonDecrypt}/{lecuIdNonDecrypt}/{subjectIdNonDecrypt}");
        Navigation.NavigateTo(url);
    }
    private async Task ResToSpec()
    {
        var url = Path.Combine($"/LectuterSpecializedSubjectls/{lecuIdNonDecrypt}/{specializedIdNonDecrypt}");
        Navigation.NavigateTo(url);
    }
    public string RandomString(int length)
    {
        const string chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
        return new string(Enumerable.Repeat(chars, length)
            .Select(s => s[random.Next(s.Length)]).ToArray());
    }
    void CheckAllExpense(object checkValue)
    {
        if (Convert.ToBoolean(checkValue) == false)
        {
            _lststudentUpDtosALL.ToList().ForEach(e => e.IsChecked = false);
            //_lstStudentUpCheck.ToList().ForEach(e => e.IsChecked = false);
        }
        else
        {
            _lststudentUpDtosALL.ToList().ForEach(e => e.IsChecked = true);
            //_lstStudentUpCheck.ToList().ForEach(e => e.IsChecked = true);
        }
    }
    void CheckManual(Guid st, bool check)
    {
        if (check == true)
        {
            foreach (var x in _lststudentUpDtosALL.Where(c => c.Id == st))
            {
                x.IsChecked = false;
            }
        }
        if (check == false)
        {
            foreach (var x in _lststudentUpDtosALL.Where(c => c.Id == st))
            {
                x.IsChecked = true;
            }
        }
    }
    private async Task Quaylai()
    {
        var url = Path.Combine($"/DetailsClassLeccu/{idClassNonDecrypt}/{specializedIdNonDecrypt}/{lecuIdNonDecrypt}/{subjectIdNonDecrypt}");
        Navigation.NavigateTo(url);
    }

    public async Task SearchStudentUP(StudentUPListSearchVm studentUPListSearch)
    {

        studentUPListSearchVm = studentUPListSearch;
        foreach (var item in _lststudentUpDtosALL)
        {
            var a = _lstStudentUpCheck.FirstOrDefault(c => c.Id == item.Id);
            a.IsChecked = item.IsChecked;
        }
        await GetTasks();
    }
    private async Task RedirectToDetails()
    {
        var url = Path.Combine($"/ViewChiTitet/{idClassNonDecrypt}/{specializedIdNonDecrypt}/{lecuIdNonDecrypt}/{subjectIdNonDecrypt}");
        Navigation.NavigateTo(url);
    }
    private async Task Mon()
    {
        var url = Path.Combine($"/Giaovien/{specializedIdNonDecrypt}/{lecuIdNonDecrypt}/{subjectIdNonDecrypt}");
        Navigation.NavigateTo(url);
    }


#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
