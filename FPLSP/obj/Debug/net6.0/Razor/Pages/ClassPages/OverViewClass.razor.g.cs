#pragma checksum "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "d61c79a14f91ad0e35dd0a3ad37c9175d89f680a"
// <auto-generated/>
#pragma warning disable 1591
namespace FPLSP.Pages.ClassPages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using FPLSP;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using FPLSP.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using MudBlazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using Blazored.Typeahead;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\_Imports.razor"
using CurrieTechnologies.Razor.SweetAlert2;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using Blazored.LocalStorage;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using Blazored.Toast.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Repositories.Interfaces;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Server.Data.SeedWork;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Server.Domain.Dtos;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Server.Domain.Entities.CoresParts;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Server.Domain.Entities.UserParts;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Server.Domain.Entities.UsesParts;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Server.Infrastructure.ViewModels;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Server.Infrastructure.ViewModels.BookMark;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Server.Infrastructure.ViewModels.LessonUP;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Server.Infrastructure.ViewModels.NewFeed;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Server.Infrastructure.ViewModels.StudentClassUPVm;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using FPLSP.Server.Infrastructure.ViewModels.SubmitHomeWorkVM;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using IdentityModel.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using Microsoft.AspNetCore.SignalR.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
using System.Text.RegularExpressions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 29 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
           [Authorize(Roles = "Student")]

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Components.LayoutAttribute(typeof(MainLayout2))]
    [global::Microsoft.AspNetCore.Components.RouteAttribute("/viewclass")]
    public partial class OverViewClass : global::Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
#nullable restore
#line 31 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
 if (_lstClass.Count() < _counter)
{

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<global::FPLSP.Components.LoadingIndicator>(0);
            __builder.CloseComponent();
#nullable restore
#line 34 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
}

#line default
#line hidden
#nullable disable
            __builder.OpenElement(1, "div");
            __builder.AddAttribute(2, "class", "pad");
#nullable restore
#line 37 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
     if (encounter != 14)
    {

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<global::FPLSP.Components.LoadingIndicator>(3);
            __builder.CloseComponent();
#nullable restore
#line 40 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
    }

#line default
#line hidden
#nullable disable
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "mt-3");
            __builder.OpenElement(6, "div");
            __builder.AddAttribute(7, "class", "card ");
            __builder.OpenElement(8, "div");
            __builder.AddAttribute(9, "class", "card-header fs-6  panel-transparent");
            __builder.OpenElement(10, "h3");
            __builder.AddAttribute(11, "class", "text-center");
            __builder.AddMarkupContent(12, "\r\n                    Số Lớp Học Hiện Tại : ");
#nullable restore
#line (45,44)-(45,50) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(13, _count);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(14, "\r\n                ");
            __builder.OpenElement(15, "div");
            __builder.AddAttribute(16, "class", "row");
            __builder.OpenElement(17, "div");
            __builder.AddAttribute(18, "class", "col-lg-6 offset-3  mt-3   d-flex justify-content-center");
            __builder.OpenElement(19, "form");
            __builder.AddAttribute(20, "class", "bg-light");
            __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.EditForm>(21);
            __builder.AddAttribute(22, "style", "width:500px;");
            __builder.AddAttribute(23, "Model", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Object>(
#nullable restore
#line 50 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                  _searchDTO

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(24, "OnSubmit", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::Microsoft.AspNetCore.Components.Forms.EditContext>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Forms.EditContext>(this, 
#nullable restore
#line 50 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                                        SearchBar

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(25, "ChildContent", (global::Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                __builder2.OpenElement(26, "div");
                __builder2.AddAttribute(27, "class", "row");
                __builder2.OpenElement(28, "div");
                __builder2.AddAttribute(29, "class", "col-lg-6 mb-3");
                __builder2.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.InputText>(30);
                __builder2.AddAttribute(31, "style", "border-radius:20px");
                __builder2.AddAttribute(32, "class", "form-control  form-control-sm fst-italic");
                __builder2.AddAttribute(33, "type", "text");
                __builder2.AddAttribute(34, "name", "search");
                __builder2.AddAttribute(35, "placeholder", "Nhập mã tham gia lớp học để vào lớp");
                __builder2.AddAttribute(36, "Value", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.String>(
#nullable restore
#line 53 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                                           _searchDTO.JoinCode

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(37, "ValueChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::System.String>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::System.String>(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => _searchDTO.JoinCode = __value, _searchDTO.JoinCode))));
                __builder2.AddAttribute(38, "ValueExpression", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Linq.Expressions.Expression<System.Func<System.String>>>(() => _searchDTO.JoinCode));
                __builder2.CloseComponent();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(39, "\r\n                                    ");
                __builder2.AddMarkupContent(40, "<div class=\"col-lg-6\"><button type=\"submit\" style=\"width:220px;border-radius:20px\" class=\"clfn btn btn-sm btn-danger\">Tìm kiếm <i class=\"fa fa-searchengin\"></i></button></div>");
                __builder2.CloseElement();
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(41, "\r\n                    ");
            __builder.AddMarkupContent(42, "<div class=\"card-title fst-italic text-center \">\r\n                        Bảng Tin Lớp Học\r\n                    </div>\r\n                    <hr>\r\n                    ");
            __builder.OpenElement(43, "div");
            __builder.AddAttribute(44, "class", "row");
            __builder.OpenElement(45, "div");
            __builder.AddAttribute(46, "class", "col-lg-6  border-end");
            __builder.AddMarkupContent(47, "<div class=\"h4 pb-2 mb-4 text-danger border-bottom border-danger text-danger fst-italic fw-bold\">\r\n                                Thông Tin Học Tập <i class=\"fa-solid fa-tags\"></i></div>");
#nullable restore
#line 72 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                             foreach (var nf in _lstNewFeed.Where(c => c.Image == "HomeWork").GroupBy(c => new { c.IdClass, c.IdSubject }))
                            {


#line default
#line hidden
#nullable disable
            __builder.OpenElement(48, "h6");
            __builder.AddAttribute(49, "class", "fw-bold");
            __builder.AddMarkupContent(50, "Lớp ");
#nullable restore
#line (75,58)-(75,186) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(51, _lstNewFeed.Where(c=>c.Image=="HomeWork").ToList().Find(c=>c.IdClass==nf.Key.IdClass && c.IdSubject==nf.Key.IdSubject).ClassName);

#line default
#line hidden
#nullable disable
            __builder.AddContent(52, "-");
#nullable restore
#line (75,188)-(75,279) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(53, _lstNewFeed.Find(c=>c.IdClass==nf.Key.IdClass && c.IdSubject==nf.Key.IdSubject).SubjectName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 79 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                 foreach (var z in nf.OrderByDescending(c => c.Priority).Skip(0).Take(5))
                                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(54, "div");
            __builder.AddAttribute(55, "class", "border-bottom border-dashed border-danger mb-1 text-primary");
            __builder.OpenElement(56, "a");
            __builder.AddAttribute(57, "class", "dropdown-item text-primary");
#nullable restore
#line 83 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                             if (z.EndDate != Convert.ToDateTime("01/01/0001 12:00:00 AM"))
                                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(58, "span");
            __builder.AddAttribute(59, "class", "break");
            __builder.OpenElement(60, "div");
            __builder.AddAttribute(61, "class", "row");
            __builder.OpenElement(62, "div");
            __builder.AddAttribute(63, "class", "col-lg-11");
            __builder.AddMarkupContent(64, "\r\n                                                            Tiêu Đề: ");
#nullable restore
#line (88,71)-(88,78) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(65, z.Title);

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(66, " | <i class=\"fa-regular fa-clock\"></i> Thời Hạn: ");
#nullable restore
#line (88,128)-(88,140) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(67, z.CratedTime);

#line default
#line hidden
#nullable disable
            __builder.AddContent(68, " - ");
#nullable restore
#line (88,144)-(88,153) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(69, z.EndDate);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(70, "\r\n                                                        ");
            __builder.AddMarkupContent(71, "<div class=\"col-lg-1\"><span class=\"t highlight\">New</span></div>");
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 96 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                            }
                                            else
                                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(72, "span");
            __builder.AddAttribute(73, "class", "break");
            __builder.OpenElement(74, "div");
            __builder.AddAttribute(75, "class", "row");
            __builder.OpenElement(76, "div");
            __builder.AddAttribute(77, "class", "col-lg-11");
            __builder.AddMarkupContent(78, "\r\n                                                            Tiêu Đề: ");
#nullable restore
#line (102,71)-(102,78) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(79, z.Title);

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(80, " | <i class=\"fa-regular fa-clock\"></i> Thời Hạn: Vô Hạn\r\n                                                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(81, "\r\n                                                        ");
            __builder.AddMarkupContent(82, "<div class=\"col-lg-1\"><span class=\" highlight\">New</span></div>");
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 109 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 112 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 112 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                 
                            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(83, "\r\n                        ");
            __builder.OpenElement(84, "div");
            __builder.AddAttribute(85, "class", "col-lg-6");
            __builder.AddMarkupContent(86, "<div class=\"h4 pb-2 mb-4 text-danger border-bottom border-danger text-danger fst-italic fw-bold\">\r\n                                Thông Tin Link Tài Nguyên <i class=\"fa-solid fa-link\"></i></div>");
#nullable restore
#line 119 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                             foreach (var nf in _lstNewFeed.Where(c => c.Image == "Resource").GroupBy(c => new { c.IdClass, c.IdSubject }))
                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(87, "h6");
            __builder.AddAttribute(88, "class", "fw-bold");
            __builder.AddMarkupContent(89, "Lớp ");
#nullable restore
#line (121,58)-(121,186) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(90, _lstNewFeed.Where(c=>c.Image=="Resource").ToList().Find(c=>c.IdClass==nf.Key.IdClass && c.IdSubject==nf.Key.IdSubject).ClassName);

#line default
#line hidden
#nullable disable
            __builder.AddContent(91, "-");
#nullable restore
#line (121,188)-(121,279) 25 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(92, _lstNewFeed.Find(c=>c.IdClass==nf.Key.IdClass && c.IdSubject==nf.Key.IdSubject).SubjectName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 123 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                 foreach (var z in nf.OrderByDescending(c => c.Priority).Skip(0).Take(5))
                                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(93, "div");
            __builder.AddAttribute(94, "class", "border-bottom border-dashed border-danger mb-1 text-primary");
            __builder.OpenElement(95, "a");
            __builder.AddAttribute(96, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 126 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                     ()=>Targeter(z.Content)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(97, "class", "dropdown-item text-primary");
            __builder.OpenElement(98, "span");
            __builder.AddAttribute(99, "class", "break");
            __builder.OpenElement(100, "div");
            __builder.AddAttribute(101, "class", "row");
            __builder.OpenElement(102, "div");
            __builder.AddAttribute(103, "class", "col-lg-11");
            __builder.AddMarkupContent(104, "\r\n                                                        Tiêu Đề: ");
#nullable restore
#line (131,67)-(131,74) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(105, z.Title);

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(106, " |&nbsp <i class=\"fa-regular fa-bookmark\"></i>: ");
#nullable restore
#line (131,123)-(131,199) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(107, _lstless.Where(c=>c.Id==z.IdLesson).Select(c=>c.LessonName).FirstOrDefault());

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(108, ";\r\n                                                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(109, "\r\n                                                    ");
            __builder.AddMarkupContent(110, "<div class=\"col-lg-1\"><span class=\" highlight\">New</span></div>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 143 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 143 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                 
                            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 167 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
             if (_bookMarkClasses != null && _bookMarkClasses.Count() > 0)
            {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(111, "<h4 class=\"text-center\">Danh Sách Các Lớp Học Yêu Thích</h4>\r\n                ");
            __builder.OpenElement(112, "div");
            __builder.AddAttribute(113, "class", "card-body");
            __builder.OpenElement(114, "div");
            __builder.AddAttribute(115, "class", "row");
#nullable restore
#line 172 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                         foreach (var x in _bookMarkClasses.Where(c => c.IsBookMark == true))
                        {
                            

#line default
#line hidden
#nullable disable
#nullable restore
#line 174 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                             foreach (var item in _lstClass.Where(c => c.Id == x.IdClass && c.SubjectId == x.IdSubject))
                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(116, "div");
            __builder.AddAttribute(117, "class", "col-lg-3 mb-5 single-product-item");
            __builder.OpenElement(118, "div");
            __builder.AddAttribute(119, "class", "card border-2 border-info");
            __builder.AddAttribute(120, "style", "height :380px");
            __builder.OpenElement(121, "div");
            __builder.AddAttribute(122, "class", "row m-0");
            __builder.OpenElement(123, "div");
            __builder.AddAttribute(124, "class", "card-body");
            __builder.AddAttribute(125, "style", "display: flex;\r\n  flex-direction: column;");
            __builder.OpenElement(126, "div");
            __builder.AddAttribute(127, "class", "row m-0");
            __builder.OpenElement(128, "div");
            __builder.AddAttribute(129, "class", "row m-0");
            __builder.AddMarkupContent(130, "<div class=\"col-lg-9\"></div>\r\n                                                        ");
            __builder.OpenElement(131, "div");
            __builder.AddAttribute(132, "class", "col-lg-3 text-danger");
            __builder.OpenComponent<global::MudBlazor.MudIconButton>(133);
            __builder.AddAttribute(134, "OnClick", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 186 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                                    ()=>DeleteFormBookMark(x.Id)

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(135, "Icon", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.String>(
#nullable restore
#line 186 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                                                                         Icons.Filled.BookmarkAdded

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(136, "Size", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::MudBlazor.Size>(
#nullable restore
#line 186 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                                                                                                           Size.Large

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(137, "Color", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::MudBlazor.Color>(
#nullable restore
#line 186 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                                                                                                                              Color.Warning

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(138, "aria-label", "add to favorite");
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(139, "\r\n                                                ");
            __builder.AddMarkupContent(140, "<div class><img src=\"./css/images/Others/logoFPT.png\" onerror=\"this.src=\'./css/images/Others/logoFPT.png\'\" class=\"card-img\" style=\"width: 150px; height: 60px; object-fit: cover;\"></div>\r\n                                                ");
            __builder.OpenElement(141, "div");
            __builder.AddAttribute(142, "class", "row mt-3");
            __builder.OpenElement(143, "span");
            __builder.AddAttribute(144, "class", " card-title fs-6 text-wrap ");
            __builder.AddMarkupContent(145, "Tên Lớp :  ");
#nullable restore
#line (194,107)-(194,125) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(146, item.ClassroomName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(147, "\r\n                                                    <hr>\r\n                                                  \r\n                                                    ");
            __builder.OpenElement(148, "p");
            __builder.AddAttribute(149, "class", "card-text");
            __builder.AddMarkupContent(150, "Môn học : ");
#nullable restore
#line (197,85)-(197,101) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(151, item.SubjectName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(152, "\r\n                                                    ");
            __builder.OpenElement(153, "p");
            __builder.AddAttribute(154, "class", "card-text");
            __builder.AddMarkupContent(155, "Giảng viên : ");
#nullable restore
#line (198,88)-(198,109) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(156, item.HomeroomLecturer);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(157, "\r\n                                                    ");
            __builder.OpenElement(158, "p");
            __builder.AddAttribute(159, "class", "card-text ");
            __builder.AddContent(160, "Join Code : ");
#nullable restore
#line (199,88)-(199,101) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(161, item.JoinCode);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(162, "\r\n                                                    ");
            __builder.OpenElement(163, "p");
            __builder.AddAttribute(164, "class", "card-text");
            __builder.AddMarkupContent(165, "Sĩ số ");
            __builder.OpenElement(166, "span");
            __builder.AddAttribute(167, "class", "badge rounded-pill bg-info");
#nullable restore
#line (200,122)-(200,148) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(168, item.ActualNumberOfStudent);

#line default
#line hidden
#nullable disable
            __builder.AddContent(169, " /");
#nullable restore
#line (200,151)-(200,169) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(170, item.StudentAmount);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(171, "\r\n                                                    <hr>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(172, "\r\n                                            ");
            __builder.OpenElement(173, "a");
            __builder.AddAttribute(174, "href", "/detailclass/" + (
#nullable restore
#line 205 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                   item.JoinCode

#line default
#line hidden
#nullable disable
            ) + "/" + (
#nullable restore
#line 205 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                                  student.Id

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(175, "style", " margin-top: -33px;");
            __builder.AddAttribute(176, "class", "btn btn-warning");
            __builder.AddMarkupContent(177, "Xem Chi Tiết");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 210 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 210 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                             
                        }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(178, "\r\n                <hr>");
#nullable restore
#line 215 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(179, "<h4 class=\"text-center\">Danh Sách Lớp Học Hiện Tại</h4>\r\n            ");
            __builder.OpenElement(180, "div");
            __builder.AddAttribute(181, "class", "card-body  panel-transparent");
            __builder.OpenElement(182, "div");
            __builder.AddAttribute(183, "class", "row");
#nullable restore
#line 219 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                     foreach (var item in _lstClass)
                    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(184, "div");
            __builder.AddAttribute(185, "class", "col-lg-3 mb-5 single-product-item");
            __builder.OpenElement(186, "div");
            __builder.AddAttribute(187, "class", "card border-2 border-info");
            __builder.AddAttribute(188, "style", "height :380px");
            __builder.OpenElement(189, "div");
            __builder.AddAttribute(190, "class", "row m-0");
            __builder.OpenElement(191, "div");
            __builder.AddAttribute(192, "class", "card-body");
            __builder.AddAttribute(193, "style", "display: flex;\r\n  flex-direction: column;");
            __builder.OpenElement(194, "div");
            __builder.AddAttribute(195, "class", "row m-0");
            __builder.OpenElement(196, "div");
            __builder.AddAttribute(197, "class", "row m-0");
            __builder.AddMarkupContent(198, "<div class=\"col-lg-9\"></div>\r\n                                                ");
            __builder.OpenElement(199, "div");
            __builder.AddAttribute(200, "class", "col-lg-3 text-danger");
            __builder.OpenComponent<global::MudBlazor.MudIconButton>(201);
            __builder.AddAttribute(202, "OnClick", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 231 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                            ()=>AddToBookMark(item.Id, item.JoinCode)

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(203, "Icon", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.String>(
#nullable restore
#line 231 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                                                                              Icons.Filled.BookmarkAdd

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(204, "Size", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::MudBlazor.Size>(
#nullable restore
#line 231 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                                                                                                              Size.Large

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(205, "Color", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::MudBlazor.Color>(
#nullable restore
#line 231 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                                                                                                                                 Color.Warning

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(206, "aria-label", "add to favorite");
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(207, "\r\n                                        ");
            __builder.AddMarkupContent(208, "<div class><img src=\"./css/images/Others/logoFPT.png\" onerror=\"this.src=\'./css/images/Others/logoFPT.png\'\" class=\"card-img\" style=\"width: 150px; height: 60px; object-fit: cover;\"></div>\r\n                                        ");
            __builder.OpenElement(209, "div");
            __builder.AddAttribute(210, "class", "row mt-3");
            __builder.OpenElement(211, "span");
            __builder.AddAttribute(212, "class", " card-title fs-6 text-wrap ");
            __builder.AddMarkupContent(213, "Tên Lớp :  ");
#nullable restore
#line (239,99)-(239,117) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(214, item.ClassroomName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(215, "\r\n                                            <hr>\r\n                                           \r\n                                            ");
            __builder.OpenElement(216, "p");
            __builder.AddAttribute(217, "class", "card-text");
            __builder.AddMarkupContent(218, "Môn học : ");
#nullable restore
#line (242,77)-(242,93) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(219, item.SubjectName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(220, "\r\n                                            ");
            __builder.OpenElement(221, "p");
            __builder.AddAttribute(222, "class", "card-text");
            __builder.AddMarkupContent(223, "Giảng viên : ");
#nullable restore
#line (243,80)-(243,101) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(224, item.HomeroomLecturer);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(225, "\r\n                                            ");
            __builder.OpenElement(226, "p");
            __builder.AddAttribute(227, "class", "card-text ");
            __builder.AddContent(228, "Join Code : ");
#nullable restore
#line (244,80)-(244,93) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(229, item.JoinCode);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(230, "\r\n                                            ");
            __builder.OpenElement(231, "p");
            __builder.AddAttribute(232, "class", "card-text");
            __builder.AddMarkupContent(233, "Sĩ số ");
            __builder.OpenElement(234, "span");
            __builder.AddAttribute(235, "class", "badge rounded-pill bg-info");
#nullable restore
#line (245,114)-(245,140) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(236, item.ActualNumberOfStudent);

#line default
#line hidden
#nullable disable
            __builder.AddContent(237, " /");
#nullable restore
#line (245,143)-(245,161) 26 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
__builder.AddContent(238, item.StudentAmount);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(239, "\r\n                                            <hr>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(240, "\r\n                                    ");
            __builder.OpenElement(241, "a");
            __builder.AddAttribute(242, "href", "/detailclass/" + (
#nullable restore
#line 250 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                           item.JoinCode

#line default
#line hidden
#nullable disable
            ) + "/" + (
#nullable restore
#line 250 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                                                                          student.Id

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(243, "style", " margin-top: -33px;");
            __builder.AddAttribute(244, "class", "btn btn-warning");
            __builder.AddMarkupContent(245, "Xem Chi Tiết");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 255 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(246, "\r\n            ");
            __builder.AddMarkupContent(247, "<div class=\"card-footer text-muted\"><div class=\"row mt-3\"></div></div>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 269 "C:\Users\Nguyen Bui\source\repos\FPLSP3\FPLSP\Pages\ClassPages\OverViewClass.razor"
       
    [Parameter]
    public string userEmail { get; set; }

    private string url = null;

    private List<NewFeedOverView> _lstNewFeed = new List<NewFeedOverView>();
    private List<BookMarkClass> _bookMarkClasses = new List<BookMarkClass>();
    public StudentUP student = new StudentUP();
    public LecturersCP lecturer = new LecturersCP();
    [Inject]
    public ITaskRepositories<ClassUPViewModel> _taskRepositories { get; set; }
    private List<ClassUPViewModel> _lstClass = new List<ClassUPViewModel>();
    private PagingParameters _pagingParameters = new PagingParameters();
    [Inject]
    public NavigationManager navigationManager { get; set; }
    private ClassUPViewModel _classUPViewModel = new ClassUPViewModel();
    private ClassSearchDTO _searchDTO = new ClassSearchDTO();
    private int _counter;
    private int _count;
    private int encounter;
    [CascadingParameter]
    private FPLSP.Shared.Error _error { get; set; } = new FPLSP.Shared.Error();
    public MetaData MetaData { get; set; } = new MetaData();
    private SubmitHomeWorkCreateVM createSubmit = new SubmitHomeWorkCreateVM();
    [Inject]
    public ISubmitHomeWorkApiClient _SubmitHomeWorkApiClient { get; set; }
    [Inject]
    public ISubmitHomeworkForStudentRepo _submitHomeworkForStudentRepo { get; set; }
    [Inject]
    public IStudentUPRepo _studentUPRepo { get; set; }
    [Inject]
    public ILecturersCPRepo _lecturersCPRepo { get; set; }
    [Inject]
    public IStudentClassUPRepo _studentClassUPRepo { get; set; }
    [Inject]
    public IClassSubjectApiClient _classSubjectApiClient { get; set; }
    //
    private List<SubjectUP> _lstSub = new List<SubjectUP>();
    private List<SpecializedDto> _lstSpec = new List<SpecializedDto>();
    private List<LecturersCPViewModel> _lstLec = new List<LecturersCPViewModel>();
    private List<StudentClassUP> _lstStuClass = new List<StudentClassUP>();
    //
    [Inject] IToastService _toast { get; set; }
    [Inject]
    public IBookMarkClassRepo _bookMarker { get; set; }
    [Inject]
    public UserManager<UserSignIn> _userManager { get; set; }
    [Inject]
    public INewFeedRepo _newFeedRepo { get; set; }
    [Inject]
    public ILessonUPRepo _less { get; set; }
    private List<LessonUPViewModel> _lstless = new List<LessonUPViewModel>();
    string patern = "^([a-z]{3,13}[0-9]{5}@fpt-edu-vn)$";
    [CascadingParameter]
    public HeaderBar headerBar { get; set; }
    protected override async Task OnInitializedAsync()
    {

        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        if (user.Identity.IsAuthenticated)
        {
            userEmail = user.Claims.ToList()[4].Value.ToString();
            var listStudent = await _studentUPRepo.GetAllStudentUPAsync();
            student = listStudent.Where(x => x.Email == userEmail).FirstOrDefault();
            // headerBar.Update += () => InvokeAsync(() => this.StateHasChanged());

        }
        else
        {
            userEmail = "ViewerUser";
            StateHasChanged();
        }




        // _count = await _taskRepositories.CountAsync();
        _lstSub = await _taskRepositories.GetAllSub();
        _lstLec = await _taskRepositories.GetAllLec();
        _lstSpec = await _taskRepositories.GetAllSpec();
        _lstStuClass = await _studentClassUPRepo.GetAllStudentUPAsync();
        _lstless = await _less.GetAll();
        await ConnectToServer();
        await GetStudentByEmail();
        await GetFavoriteClass();
        await GetClassList(_searchDTO);
        await GetNewFeed();

    }
    protected async override Task OnAfterRenderAsync(bool firstRender)
    {


    }
    private async Task Targeter(string? Taget)
    {

        await jsRuntime.InvokeVoidAsync("Targeter", Taget);

    }




    private async Task ConnectToServer()
    {
        try
        {
            string url = "http://localhost:5001/notificationhub";
            HubConnection _connection = null;
            bool isConnected = false;
            string connectionStatus = "Closed";
            _connection = new HubConnectionBuilder()
                .WithUrl(url)
                .Build();

            await _connection.StartAsync();
            isConnected = true;
            connectionStatus = "Connected :-)";
            Console.WriteLine("SinalR Is Starting");
            _connection.Closed += async (s) =>
            {
                isConnected = false;
                connectionStatus = "Disconnected";
                await _connection.StartAsync();
                isConnected = true;
            };

            _connection.On<string>("Noticafications", async (res) =>
            {
                if (res == "Done")
                {
                    await GetNewFeed();

                    this.InvokeAsync(() => this.StateHasChanged());
                }


            });
        }
        catch (Exception ex)
        {

            _error.ProcessError(ex);
        }
    }



    private async Task GetClassList(ClassSearchDTO classSearchDTO)
    {

        if (student != null)
        {
            _lstClass = await _taskRepositories.GetAllClass(student.Id);
            _count = _lstClass.Count;
        }

        for (var i = 0; i < 15; i++)
        {
            encounter = i;
        }
    }
    private async Task GetNewFeed()
    {
        if (student == null)
        {
            return;
        }
        _lstNewFeed = await _newFeedRepo.GetListNewForUser(Guid.Parse(student.Id.ToString()));

        // _lstNewFeedforclass = await _newFeedRepo.GetListNewForClass(_classUp.Id,Guid.Parse( _classUp.SubjectId.ToString()));
    }
    private async Task GetFavoriteClass()
    {
        if (student == null)
        {
            return;
        }
        _bookMarkClasses = await _bookMarker.GetListBookMarkForUser(student.Id);
    }
    private async Task GetStudentByEmail()
    {
        var listStudent = await _studentUPRepo.GetAllStudentUPAsync();
        student = listStudent.Where(x => x.Email==userEmail).FirstOrDefault();
        if (student == null)
        {
            return;
        }
    }

    private async Task GetLecturerByEmail()
    {
        var listLecturer = await _lecturersCPRepo.GetAllLecturerAsync();

        lecturer = listLecturer.FirstOrDefault(x => x.Email==userEmail);
    }

    private async Task<IEnumerable<ClassUPViewModel>> AutoSearch(string ClassName)
    {
        return await Task.FromResult(_lstClass.Where(c => c.ClassroomName.ToLower().Contains(ClassName.ToLower())).ToList());
    }
    private async Task SelectedPage(int page)
    {
        _searchDTO.PageNumber = page;
        await GetClassList(_searchDTO);
    }
    private async Task SearchBar(EditContext editContext)
    {

       



        var classSearched = await _taskRepositories.GetClassById(_searchDTO.JoinCode);
        if (String.IsNullOrEmpty(classSearched.JoinCode) == false && classSearched.Id != Guid.Empty)
        {
            var listClassOfSubject = await _classSubjectApiClient.GetlstClassUP(Guid.Parse(classSearched.SubjectId.ToString()));

            bool isDuplicated = false;
            if (listClassOfSubject != null)
            {


                foreach (var ClassUP in listClassOfSubject)
                {
                    if (_lstStuClass.Any(c => c.ClassId == ClassUP.Id && c.StudentId == student.Id))
                    {
                        await Swal.FireAsync("Tham Gia Lớp Học", "Không thể tham gia nhiều hơn một lớp với một môn học", SweetAlertIcon.Warning);
                        isDuplicated = true;
                        break;
                    }
                }

                if (!isDuplicated)
                {
                    await _studentClassUPRepo.CreateStudentInClassByJoinCode(classSearched.Id, student.Id, _searchDTO.JoinCode);

                    List<Guid?> lstGuidIdStudent = new List<Guid?>();
                    lstGuidIdStudent.Add(student.Id);

                    if (lstGuidIdStudent.Count() > 0)
                    {
                        var AllSubMit = await _submitHomeworkForStudentRepo.Student_GetAllAsync();
                        var SubmitIdLesson = AllSubMit.Where(c => c.IdSubject == classSearched.SubjectId && c.IdClass == classSearched.Id).ToList();

                        var GroupIDLesson = SubmitIdLesson.GroupBy(g => g.Titile).Select(c => new SubmitHomeWork()
                            {
                                Id = c.Where(w => w.Titile == c.Key).Select(c => c.Id).FirstOrDefault(),
                                IdClass = c.Where(w => w.Titile == c.Key).Select(c => c.IdClass).FirstOrDefault(),
                                IdLesson = c.Where(w => w.Titile == c.Key).Select(c => c.IdLesson).FirstOrDefault(),
                                IdStudent = c.Where(w => w.Titile == c.Key).Select(c => c.IdStudent).FirstOrDefault(),
                                IdSubject = c.Where(w => w.Titile == c.Key).Select(c => c.IdSubject).FirstOrDefault(),
                                EndTime = c.Where(w => w.Titile == c.Key).Select(c => c.EndTime).FirstOrDefault(),
                                Status = c.Where(w => w.Titile == c.Key).Select(c => c.Status).FirstOrDefault(),
                                Titile = c.Where(w => w.Titile == c.Key).Select(c => c.Titile).FirstOrDefault(),
                                StartedDate = c.Where(w => w.Titile == c.Key).Select(c => c.StartedDate).FirstOrDefault(),
                                SubmitLink = c.Where(w => w.Titile == c.Key).Select(c => c.SubmitLink).FirstOrDefault(),
                                SubmitTime = c.Where(w => w.Titile == c.Key).Select(c => c.SubmitTime).FirstOrDefault(),
                            }).ToList();
                        foreach (var item in GroupIDLesson)
                        {
                            createSubmit = new SubmitHomeWorkCreateVM()
                                {
                                    EndTime = item.EndTime,
                                    IdLesson = item.IdLesson,
                                    IdSubject = item.IdSubject,
                                    LsIdStudent = lstGuidIdStudent,
                                    StartedDate = item.StartedDate,
                                    SubmitTime = null,
                                    IdClass = item.IdClass,
                                    Titile = item.Titile
                                };
                            if (AllSubMit.Any(c => c.IdClass == createSubmit.IdClass && c.IdLesson == createSubmit.IdLesson && c.IdSubject == createSubmit.IdSubject && lstGuidIdStudent.Any(a => a == c.IdStudent)))
                            {
                                continue;
                            }
                            else
                            {
                                await _SubmitHomeWorkApiClient.Add(createSubmit);
                            }
                        }
                    }

                    await Swal.FireAsync("Tham Gia Lớp Học", "Tham Gia Thành Công Lớp Học", SweetAlertIcon.Success);
                }
            }
        }
        else
        {
            await Swal.FireAsync("Tham Gia Lớp Học", "Lớp Học Không Tồn Tại", SweetAlertIcon.Error);
            return;
        }

        await OnInitializedAsync();
    }


    private async Task AddToBookMark(Guid IdClass, string JoinCode)
    {
        var subjectid = _lstClass.Where(c => c.JoinCode == JoinCode).Select(c => c.SubjectId).FirstOrDefault();

        if (IdClass != null && JoinCode != null)
        {
            var booker = new BookMarkClassVM()
                {
                    Id = Guid.NewGuid(),
                    Status = 0,
                    Priority = _bookMarkClasses.Count == 0 ? 0 : _bookMarkClasses.Max(c => c.Priority) + 1,
                    IsBookMark = true,
                    IdUser = student.Id.ToString(),
                    IdClass = IdClass,
                    IdSubject = _lstClass.Where(c => c.JoinCode == JoinCode).Select(c => c.SubjectId).FirstOrDefault()
                };
            var res = await _bookMarker.AddToBookMark(booker);
            if (res)
            {
                await Swal.FireAsync(" Danh Sách Yêu Thích", "Thêm Thành Công Lớp Vào Danh Sách Yêu Thích", SweetAlertIcon.Success);

            }
            else
            {
                await Swal.FireAsync(" Danh Sách Yêu Thích", "Thêm Thất Bại", SweetAlertIcon.Error);
            }
            await GetClassList(_searchDTO);
            await GetFavoriteClass();
        }


    }
    private async Task navigate()
    {
        navigationManager.NavigateTo("oke");
    }
    private async Task DeleteFormBookMark(Guid IdBookMark)
    {
        if (IdBookMark != null)
        {
            var res = await _bookMarker.RemoveBookMark(IdBookMark);
            if (res)
            {
                await Swal.FireAsync("Xóa Khỏi Danh Sách Yêu Thích", "Đã Xóa Lớp Khỏi Danh Sách Yêu Thích", SweetAlertIcon.Success);
            }
            else
            {
                await Swal.FireAsync("Xóa Khỏi Danh Sách Yêu Thích", " Xóa Lớp Khỏi Danh Sách Yêu Thích Thất Bại", SweetAlertIcon.Error);

            }
            await GetClassList(_searchDTO);
            await GetFavoriteClass();
        }
    }
    private async Task JoinClass(string joinCodeAssign)
    {
        var stuClassUP = _lstStuClass.Where(c => c.JoinCodeAsign == joinCodeAssign && c.StudentId == student.Id).FirstOrDefault();
        StudentClassUPUpdateVm stuClassUpdate = new StudentClassUPUpdateVm()
            {
                StudentId = stuClassUP.StudentId,
                ClassId = stuClassUP.ClassId,
                JoinCodeAsign = joinCodeAssign,
                Status = stuClassUP.Status,
                StatusOfStudent = 0
            };

        await OnInitializedAsync();
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private AuthenticationStateProvider AuthenticationStateProvider { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private SweetAlertService Swal { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime jsRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IHttpContextAccessor _http { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ILocalStorageService _localStorageService { get; set; }
    }
}
#pragma warning restore 1591
